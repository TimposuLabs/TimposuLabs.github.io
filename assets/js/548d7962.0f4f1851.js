"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[66972],{8592(t,n,e){e.d(n,{A:()=>a});const a=e.p+"assets/images/one-to-many2-00fb2d0cbe6ed69f3fb5b85aae37a8e9.png"},28453(t,n,e){e.d(n,{R:()=>i,x:()=>d});var a=e(96540);const r={},s=a.createContext(r);function i(t){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof t?t(n):{...n,...t}},[n,t])}function d(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:i(t.components),a.createElement(s.Provider,{value:n},t.children)}},90176(t,n,e){e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/one-to-many-eager","title":"One-to-Many Eager Fetch","description":"Hibernate","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/17-one-to-many-eager.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/one-to-many-eager","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many-eager","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17,"title":"One-to-Many Eager Fetch"},"sidebar":"tutorialSidebar","previous":{"title":"Fetch Type: Eager vs Lazy","permalink":"/spring/springboot/springboot-jpa-hibernate/eager-lazy"},"next":{"title":"One-to-Many Lazy Fetch","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many-lazy"}}');var r=e(74848),s=e(28453);const i={sidebar_position:17,title:"One-to-Many Eager Fetch"},d=void 0,l={},c=[{value:"1\ufe0f\u20e3 Entity Parrent: <code>Classes.java</code>",id:"1\ufe0f\u20e3-entity-parrent-classesjava",level:2},{value:"2\ufe0f\u20e3 Entity Child: <code>Student.java</code>",id:"2\ufe0f\u20e3-entity-child-studentjava",level:2},{value:"3\ufe0f\u20e3 Main Class",id:"3\ufe0f\u20e3-main-class",level:2}];function o(t){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Hibernate",src:e(8592).A+"",width:"782",height:"310"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Eager Fetching"})," adalah strategi pengambilan data di mana Hibernate secara otomatis mengambil entitas utama beserta seluruh entitas relasinya dalam satu waktu."]}),"\n",(0,r.jsxs)(n.p,{children:["Jika pada ",(0,r.jsx)(n.strong,{children:"Lazy Fetching"})," data child (",(0,r.jsx)(n.code,{children:"Students"}),") baru diambil saat kita memanggil method ",(0,r.jsx)(n.code,{children:"getStudents()"}),", sedangkan pada ",(0,r.jsx)(n.strong,{children:"Eager Fetching"}),", saat kita memanggil ",(0,r.jsx)(n.code,{children:"Classes"}),", semua data ",(0,r.jsx)(n.code,{children:"Students"})," sudah langsung tersedia di memori (RAM)."]}),"\n",(0,r.jsxs)(n.h2,{id:"1\ufe0f\u20e3-entity-parrent-classesjava",children:["1\ufe0f\u20e3 Entity Parrent: ",(0,r.jsx)(n.code,{children:"Classes.java"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Entity\r\n@Table(name = "classes")\r\npublic class Classes {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\t\r\n\t@Column(name = "class_name")\r\n\tprivate String className;\r\n\t\r\n\t@OneToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\t@JoinColumn(name = "teacher_id")\r\n\tprivate Teacher teacher;\r\n\t\r\n\t@OneToMany(\r\n\t\t\tmappedBy = "classes",\r\n\t\t\tfetch = FetchType.EAGER,\r\n\t\t\tcascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\tList<Student> students = new ArrayList<>();\r\n\r\n\tpublic Classes() {\t\t\r\n\t}\r\n\r\n\tpublic Classes(String className, Teacher teacher) {\r\n\t\tthis.className = className;\r\n\t\tthis.teacher = teacher;\r\n\t}\r\n\t\r\n\tpublic Integer getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Integer id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getClassName() {\r\n\t\treturn className;\r\n\t}\r\n\r\n\tpublic void setClassName(String className) {\r\n\t\tthis.className = className;\r\n\t}\r\n\r\n\tpublic Teacher getTeacher() {\r\n\t\treturn teacher;\r\n\t}\r\n\r\n\tpublic void setTeacher(Teacher teacher) {\r\n\t\tthis.teacher = teacher;\r\n\t}\r\n\r\n\tpublic List<Student> getStudents() {\r\n\t\treturn students;\r\n\t}\r\n\r\n\tpublic void setStudents(List<Student> students) {\r\n\t\tthis.students = students;\r\n\t}\r\n\r\n\t// menambah method \'add()\' memastikan kedua sisi terhubung secara konsisten dalam memori Java dengan Bi-Direction\r\n\tpublic void add(Student student) {\r\n\t\tif (students == null) {\r\n\t\t\tstudents = new ArrayList<>();\t\t\t\r\n\t\t}\r\n\t\tstudents.add(student);\r\n\t\t\r\n\t\tif (student != null) {\r\n\t\t\tstudent.setClasses(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn "Class [id=" + id + ", className=" + className + ", teacher=" + teacher + "]";\r\n\t}\r\n}\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"2\ufe0f\u20e3-entity-child-studentjava",children:["2\ufe0f\u20e3 Entity Child: ",(0,r.jsx)(n.code,{children:"Student.java"})]}),"\n",(0,r.jsxs)(n.p,{children:["Sisi ",(0,r.jsx)(n.code,{children:"@ManyToOne"})," secara default sudah bersifat ",(0,r.jsx)(n.strong,{children:"EAGER"}),", jadi kita tidak perlu mengubahnya kecuali ingin menjadikannya ",(0,r.jsx)(n.strong,{children:"LAZY"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Entity\r\n@Table(name = "student")\r\npublic class Student {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\t\r\n\t@Column(name = "first_name")\r\n\tprivate String firstName;\r\n\t\r\n\t@Column(name = "last_name")\r\n\tprivate String lastName;\r\n\t\r\n\t@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\t@JoinColumn(name = "class_id")\r\n\tprivate Classes classes;\r\n\t\r\n\tpublic Student() {\t\t\r\n\t}\r\n\r\n\tpublic Student(String firstName, String lastName) {\r\n\t\tthis.firstName = firstName;\r\n\t\tthis.lastName = lastName;\r\n\t}\r\n\r\n\tpublic Integer getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Integer id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getFirstName() {\r\n\t\treturn firstName;\r\n\t}\r\n\r\n\tpublic void setFirstName(String firstName) {\r\n\t\tthis.firstName = firstName;\r\n\t}\r\n\r\n\tpublic String getLastName() {\r\n\t\treturn lastName;\r\n\t}\r\n\r\n\tpublic void setLastName(String lastName) {\r\n\t\tthis.lastName = lastName;\r\n\t}\r\n\t\r\n\tpublic Classes getClasses() {\r\n\t\treturn classes;\r\n\t}\r\n\r\n\tpublic void setClasses(Classes classes) {\r\n\t\tthis.classes = classes;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn "Student [id=" + id + ", firstName=" + firstName + ", lastName=" + lastName + "]";\r\n\t}\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-main-class",children:"3\ufe0f\u20e3 Main Class"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Pada main class application kita akan menampilkan data ",(0,r.jsx)(n.code,{children:"Classes"})," dengan berisi data ",(0,r.jsx)(n.code,{children:"Student"}),". Dalam contoh di bawah ini kita akan menampilkan data ",(0,r.jsx)(n.code,{children:"Classes"})," dengan id 3:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t// Bean ini akan dieksekusi di command line\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(SchoolDAO dao) {\r\n\t\treturn runner -> {\r\n\t\t\t\r\n\t\t\tfindClassWithStudent(dao);\t\t\t\r\n\r\n\t\t};\r\n\t}\r\n\r\n\tprivate void findClassWithStudent(SchoolDAO dao) {\r\n\t\tint id = 3;\r\n\t\tClasses classes = dao.findClassById(id);\r\n\t\t\r\n\t\tSystem.out.println("Kelas: " + classes);\r\n\t\tSystem.out.println("Daftar siswa: " + classes.getStudents());\r\n\t}\r\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Output pada Hibernate SQL:"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Asumsi kita mempunyai data dalam database:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mysql> select * from classes;\r\n+----+------------+------------+\r\n| id | class_name | teacher_id |\r\n+----+------------+------------+\r\n|  3 | Kelas 10   |          2 |\r\n+----+------------+------------+\r\n\r\nmysql> select * from student;\r\n+----+------------+-----------+----------+\r\n| id | first_name | last_name | class_id |\r\n+----+------------+-----------+----------+\r\n|  7 | Uzumaki    | Naruto    |        3 |\r\n|  8 | Uciha      | Sazuke    |        3 |\r\n|  9 | Haruno     | Sakura    |        3 |\r\n+----+------------+-----------+----------+\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output JPQL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"Hibernate: select c1_0.id,c1_0.class_name,t1_0.id,t1_0.first_name,t1_0.last_name,s1_0.class_id,s1_0.id,s1_0.first_name,s1_0.last_name from classes c1_0 left join teacher t1_0 on t1_0.id=c1_0.teacher_id left join student s1_0 on c1_0.id=s1_0.class_id where c1_0.id=?\r\nKelas: Class [id=3, className=Kelas 10, teacher=Guru [id=2, firstName=Hatake, lastName=Kakashi]]\r\nDaftar siswa: [Student [id=7, firstName=Uzumaki, lastName=Naruto], Student [id=8, firstName=Uciha, lastName=Sazuke], Student [id=9, firstName=Haruno, lastName=Sakura]]\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source Code"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/05-hibernate-one-to-many-eager",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/05-hibernate-one-to-many-eager"})]})})]})}function u(t={}){const{wrapper:n}={...(0,s.R)(),...t.components};return n?(0,r.jsx)(n,{...t,children:(0,r.jsx)(o,{...t})}):o(t)}}}]);