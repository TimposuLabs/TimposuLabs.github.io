"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[4685],{28453(n,a,t){t.d(a,{R:()=>o,x:()=>s});var i=t(96540);const e={},r=i.createContext(e);function o(n){const a=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(a):{...a,...n}},[a,n])}function s(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(e):n.components||e:o(n.components),i.createElement(r.Provider,{value:a},n.children)}},43708(n,a,t){t.d(a,{A:()=>i});const i=t.p+"assets/images/springboot-mvc26-46d3119e39cbb4458e24a6774de192f6.png"},69677(n,a,t){t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"springboot/springboot-mvc/custom-validation","title":"Custom Validation","description":"Dalam Spring Boot MVC kita dapat membuat Custom Validation yaitu membuat aturan validasi sendiri jika anotasi standar (seperti @NotNull atau @Min) tidak cukup untuk memenuhi logika bisnis yang kompleks.","source":"@site/tutorial/spring/springboot/springboot-mvc/18-custom-validation.md","sourceDirName":"springboot/springboot-mvc","slug":"/springboot/springboot-mvc/custom-validation","permalink":"/spring/springboot/springboot-mvc/custom-validation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"title":"Custom Validation"},"sidebar":"tutorialSidebar","previous":{"title":"Custom Error Names","permalink":"/spring/springboot/springboot-mvc/custom-error-names"},"next":{"title":"Spring Boot MVC CRUD","permalink":"/spring/springboot/springboot-mvc-crud/"}}');var e=t(74848),r=t(28453);const o={sidebar_position:20,title:"Custom Validation"},s=void 0,l={},d=[{value:"1\ufe0f\u20e3 Membuat Custom Annotation",id:"1\ufe0f\u20e3-membuat-custom-annotation",level:3},{value:"2\ufe0f\u20e3 Membuat Class Validator",id:"2\ufe0f\u20e3-membuat-class-validator",level:3},{value:"3\ufe0f\u20e3 Menggunakan Anotasi di Model",id:"3\ufe0f\u20e3-menggunakan-anotasi-di-model",level:3},{value:"4\ufe0f\u20e3 Controller",id:"4\ufe0f\u20e3-controller",level:3}];function u(n){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.p,{children:["Dalam Spring Boot MVC kita dapat membuat Custom Validation yaitu membuat aturan validasi sendiri jika anotasi standar (seperti ",(0,e.jsx)(a.code,{children:"@NotNull"})," atau ",(0,e.jsx)(a.code,{children:"@Min"}),") tidak cukup untuk memenuhi logika bisnis yang kompleks."]}),"\n",(0,e.jsxs)(a.p,{children:["Misalnya kita ingin membuat validation ",(0,e.jsx)(a.code,{children:"@DiscountCode"})," yang harus memiliki kode awalan sesuai keinginan kita misalnya default ",(0,e.jsx)(a.code,{children:"PROMO"}),":"]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode // default PROMO\r\n@NotNull(message = "Is Required")\r\nprivate String discountCode;\n'})}),"\n",(0,e.jsxs)(a.p,{children:["Tapi nantinya value dari ",(0,e.jsx)(a.code,{children:"@DiscountCode"})," dapat diubah misalnya ",(0,e.jsx)(a.code,{children:'@DiscountCode(value = "NEWYEAR", message = "Must start with NEWYEAR")'}),"."]}),"\n",(0,e.jsx)(a.p,{children:"Berikut langkahnya:"}),"\n",(0,e.jsx)(a.h3,{id:"1\ufe0f\u20e3-membuat-custom-annotation",children:"1\ufe0f\u20e3 Membuat Custom Annotation"}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'import java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\nimport jakarta.validation.Constraint;\r\nimport jakarta.validation.Payload;\r\n\r\n@Constraint(validatedBy = DiscountCodeConstraintValidator.class) // Menghubungkan ke class logic\r\n@Target({ElementType.FIELD, ElementType.METHOD}) // Bisa dipakai di field atau method\r\n@Retention(RetentionPolicy.RUNTIME) // Tetap ada saat aplikasi berjalan\r\npublic @interface DiscountCode {\r\n\r\n\t// default discount code dengan value \'PROMO` jika tidak didefinisikan\r\n\tpublic String value() default "PROMO";\r\n\t\r\n\t// dafault error message\r\n\tpublic String message() default "must start with PROMO";\r\n\t\r\n\t// default group dari Bean Validation (wajib ada)\r\n\tpublic Class<?>[] groups() default {};\r\n\t\r\n\t// default payloads dari Bean Validation (wajib ada)\r\n\tpublic Class<? extends Payload>[] payload() default {};\r\n}\n'})}),"\n",(0,e.jsx)(a.h3,{id:"2\ufe0f\u20e3-membuat-class-validator",children:"2\ufe0f\u20e3 Membuat Class Validator"}),"\n",(0,e.jsxs)(a.p,{children:["Class ini berisi logika untuk mengecek apakah data yang diinput pengguna valid atau tidak. Kelas ini harus mengimplementasikan ",(0,e.jsx)(a.code,{children:"ConstraintValidator"}),"."]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:"import jakarta.validation.ConstraintValidator;\r\nimport jakarta.validation.ConstraintValidatorContext;\r\n\r\npublic class DiscountCodeConstraintValidator implements ConstraintValidator<DiscountCode, String> {\r\n\r\n\tprivate String prefix;\r\n\t\r\n\t@Override\r\n\tpublic void initialize(DiscountCode discountCode) {\r\n\t\tprefix = discountCode.value();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic boolean isValid(String value, ConstraintValidatorContext context) {\r\n\t\t\r\n\t\tboolean result; \r\n\t\t\r\n\t\tif (value != null) {\r\n\t\t\tresult = value.startsWith(prefix); // mencocokan prefix awalan value discount code\r\n\t\t} else {\r\n\t\t\tresult = true;\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t}\r\n}\n"})}),"\n",(0,e.jsx)(a.h3,{id:"3\ufe0f\u20e3-menggunakan-anotasi-di-model",children:"3\ufe0f\u20e3 Menggunakan Anotasi di Model"}),"\n",(0,e.jsx)(a.p,{children:"Setelah dibuat, kita bisa menggunakannya semudah menggunakan anotasi yang lain."}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode\r\n@NotNull(message = "Is Required")\r\nprivate String discountCode;\n'})}),"\n",(0,e.jsx)(a.h3,{id:"4\ufe0f\u20e3-controller",children:"4\ufe0f\u20e3 Controller"}),"\n",(0,e.jsxs)(a.p,{children:["Sama seperti validasi standar, Anda hanya perlu menambahkan ",(0,e.jsx)(a.code,{children:"@Valid"})," di Controller."]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@PostMapping("/process")\r\npublic String processForm(\r\n        @Valid @ModelAttribute("person") Person person,\r\n        BindingResult bindingResult) {\r\n    \r\n    if (bindingResult.hasErrors()) {\r\n        return "person-form";\r\n    } else {\r\n        return "person-confirm";\r\n    }\r\n}\n'})}),"\n",(0,e.jsx)(a.p,{children:(0,e.jsx)(a.img,{alt:"Spring Boot MVC",src:t(43708).A+"",width:"903",height:"578"})}),"\n",(0,e.jsxs)(a.p,{children:["Untuk mengubah default value dari ",(0,e.jsx)(a.code,{children:"@DiscountCode"}),", bisa dilakukan dengan cara biasa seperti validation lainnya, misalnya mengganti code ",(0,e.jsx)(a.code,{children:"PROMO"})," dengan ",(0,e.jsx)(a.code,{children:"NEWYEAR"}),":"]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode(value = "NEWYEAR", message = "Must start with NEWYEAR")\r\n@NotNull(message = "Is Required")\r\nprivate String discountCode;\n'})}),"\n",(0,e.jsx)(a.admonition,{type:"info",children:(0,e.jsxs)(a.p,{children:["Source Code: ",(0,e.jsx)(a.a,{href:"https://github.com/TimposuLabs/belajar-springboot-mvc/tree/main/17-belajar-spring-mvc-custom-validation",children:"https://github.com/TimposuLabs/belajar-springboot-mvc/tree/main/17-belajar-spring-mvc-custom-validation"})]})})]})}function c(n={}){const{wrapper:a}={...(0,r.R)(),...n.components};return a?(0,e.jsx)(a,{...n,children:(0,e.jsx)(u,{...n})}):u(n)}}}]);