"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[5371],{28255(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>c,frontMatter:()=>s,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/delete-data","title":"Delete Data","description":"Menghapus (DELETE) data dalam JPA/Hibernate berarti menghapus sebuah entitas/entity dari database sehingga baris datanya hilang secara permanen.","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/07-delete-data.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/delete-data","permalink":"/spring/springboot/springboot-jpa-hibernate/delete-data","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Delete Data"},"sidebar":"tutorialSidebar","previous":{"title":"Update Data","permalink":"/spring/springboot/springboot-jpa-hibernate/update-data"},"next":{"title":"One-to-One Mapping","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-one"}}');var r=a(74848),i=a(28453);const s={sidebar_position:7,title:"Delete Data"},d=void 0,l={},u=[{value:"A. Menghapus Menggunakan <code>entityManager.remove()</code>",id:"a-menghapus-menggunakan-entitymanagerremove",level:2},{value:"B. Menghapus Menggunakan JPQL (Bulk Delete)",id:"b-menghapus-menggunakan-jpql-bulk-delete",level:2},{value:"\u270d\ufe0f Konsep Penting dalam Penghapusan Data",id:"\ufe0f-konsep-penting-dalam-penghapusan-data",level:2},{value:"A. Soft Delete vs Hard Delete",id:"a-soft-delete-vs-hard-delete",level:3},{value:"B. Cascade Delete",id:"b-cascade-delete",level:3},{value:"C. Pentingnya <code>@Transactional</code>",id:"c-pentingnya-transactional",level:3},{value:"\ud83d\udd25 Ringkasan",id:"-ringkasan",level:2},{value:"1\ufe0f\u20e3 Repository / DAO",id:"1\ufe0f\u20e3-repository--dao",level:2},{value:"2\ufe0f\u20e3 Main Class",id:"2\ufe0f\u20e3-main-class",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Menghapus (DELETE) data dalam JPA/Hibernate berarti menghapus sebuah entitas/entity dari database sehingga baris datanya hilang secara permanen."}),"\n",(0,r.jsx)(n.p,{children:"Untuk menghapus data, ada beberapa cara utama untuk melakukannya:"}),"\n",(0,r.jsxs)(n.h2,{id:"a-menghapus-menggunakan-entitymanagerremove",children:["A. Menghapus Menggunakan ",(0,r.jsx)(n.code,{children:"entityManager.remove()"})]}),"\n",(0,r.jsxs)(n.p,{children:["Ini adalah cara yang paling umum jika kita sudah memiliki objek entity di tangan (status ",(0,r.jsx)(n.code,{children:"Managed"}),")."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Langkah-langkah:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Cari data terlebih dahulu berdasarkan ID."}),"\n",(0,r.jsxs)(n.li,{children:["Panggil method ",(0,r.jsx)(n.code,{children:"remove()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'Transactional\r\npublic void deleteStudentById(Long id) {\r\n    // 1. Cari data (Objek harus dalam status Managed agar bisa dihapus)\r\n    Student student = entityManager.find(Student.class, id);\r\n\r\n    // 2. Jika data ada, hapus\r\n    if (student != null) {\r\n        entityManager.remove(student);\r\n        System.out.println("Data dengan ID " + id + " berhasil dihapus.");\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"b-menghapus-menggunakan-jpql-bulk-delete",children:"B. Menghapus Menggunakan JPQL (Bulk Delete)"}),"\n",(0,r.jsxs)(n.p,{children:['Gunakan cara ini jika Anda ingin menghapus data berdasarkan kriteria tertentu (misal: hapus semua mahasiswa yang emailnya mengandung "@spam.com") atau ingin menghapus data dengan cepat tanpa perlu melakukan ',(0,r.jsx)(n.code,{children:"SELECT"})," terlebih dahulu."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Transactional\r\npublic int deleteByEmailDomain(String domain) {\r\n    // Menggunakan JPQL: "DELETE FROM Student s WHERE ..."\r\n    String jpql = "DELETE FROM Student s WHERE s.email LIKE :emailDomain";\r\n    \r\n    int rowsDeleted = entityManager.createQuery(jpql)\r\n            .setParameter("emailDomain", "%" + domain)\r\n            .executeUpdate(); // Wajib menggunakan executeUpdate()\r\n            \r\n    return rowsDeleted;\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-konsep-penting-dalam-penghapusan-data",children:"\u270d\ufe0f Konsep Penting dalam Penghapusan Data"}),"\n",(0,r.jsx)(n.h3,{id:"a-soft-delete-vs-hard-delete",children:"A. Soft Delete vs Hard Delete"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hard Delete (Materi di atas)"}),": Data benar-benar hilang dari tabel database."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Soft Delete"})," : Data tidak dihapus, melainkan ditandai dengan kolom dalam tabel, misalnya ",(0,r.jsx)(n.code,{children:"is_deleted = true"}),". Cara ini lebih aman untuk audit data. Anda bisa menggunakan anotasi ",(0,r.jsx)(n.code,{children:"@SQLDelete"})," milik Hibernate untuk mengubah perintah ",(0,r.jsx)(n.code,{children:"DELETE"})," menjadi ",(0,r.jsx)(n.code,{children:"UPDATE"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"b-cascade-delete",children:"B. Cascade Delete"}),"\n",(0,r.jsxs)(n.p,{children:["Jika entitas ",(0,r.jsx)(n.code,{children:"Student"})," memiliki relasi dengan entitas ",(0,r.jsx)(n.code,{children:"Course"}),", Anda bisa mengatur agar saat ",(0,r.jsx)(n.code,{children:"Student"})," dihapus, data course-nya juga ikut terhapus secara otomatis dengan menambahkan ",(0,r.jsx)(n.code,{children:"cascade = CascadeType.REMOVE"})," pada anotasi relasi."]}),"\n",(0,r.jsxs)(n.h3,{id:"c-pentingnya-transactional",children:["C. Pentingnya ",(0,r.jsx)(n.code,{children:"@Transactional"})]}),"\n",(0,r.jsxs)(n.p,{children:["Operasi penghapusan wajib menggunakan ",(0,r.jsx)(n.code,{children:"@Transactional"}),". Tanpa transaksi yang aktif, Hibernate akan melempar error ",(0,r.jsx)(n.code,{children:"TransactionRequiredException"})," karena database tidak mengizinkan penghapusan data tanpa pengawasan transaksi."]}),"\n",(0,r.jsx)(n.h2,{id:"-ringkasan",children:"\ud83d\udd25 Ringkasan"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Kapan Digunakan?"}),(0,r.jsx)(n.th,{children:"Performa"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"remove(entity)"})}),(0,r.jsx)(n.td,{children:"Saat Anda sudah memegang objeknya."}),(0,r.jsxs)(n.td,{children:["Sedang (melakukan ",(0,r.jsx)(n.code,{children:"SELECT"})," lalu ",(0,r.jsx)(n.code,{children:"DELETE"}),")."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"JPQL Delete"})}),(0,r.jsx)(n.td,{children:"Menghapus banyak data sekaligus atau kriteria khusus."}),(0,r.jsx)(n.td,{children:"Sangat Cepat (Langsung menjalankan 1 perintah SQL)."})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Berikut kita akan implementasikan delete data dari project tutorial sebelumnya."}),"\n",(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-repository--dao",children:"1\ufe0f\u20e3 Repository / DAO"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Menambahkan method baru pada interface DAO dengan menambahkan method ",(0,r.jsx)(n.code,{children:"delete"}),":"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public interface StudentDAO {\r\n\r\n   \tvoid save(Student student);\r\n\t\r\n\tStudent findById(Long id);\r\n\t\r\n\tList<Student> findAll();\r\n\t\r\n\tList<Student> findByLastName(String lastName);\r\n\r\n\tvoid update(Student student);\r\n\r\n\tvoid delete(Long id);\r\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implementasi DAO:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Repository\r\npublic class StudentDAOImpl implements StudentDAO {\r\n\r\n\tprivate EntityManager entityManager;\r\n\t\r\n\tpublic StudentDAOImpl(EntityManager entityManager) {\r\n\t\tthis.entityManager = entityManager;\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void save(Student student) {\r\n\t\tentityManager.persist(student);\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic Student findById(Long id) {\r\n\t\treturn entityManager.find(Student.class, id);\r\n\t}\r\n\t\t\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic List<Student> findAll() {\t\t\r\n\t\tTypedQuery<Student> query = entityManager.createQuery("FROM Student ORDER BY lastName asc", Student.class);\t\t\r\n\t\treturn query.getResultList();\r\n\t}\r\n\t\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic List<Student> findByLastName(String lastName) {\r\n\t\tTypedQuery<Student> query = entityManager.createQuery("FROM Student WHERE lastName=:theLastName", Student.class);\r\n\t\tquery.setParameter("theLastName", lastName);\r\n\t\treturn query.getResultList();\r\n\t}\r\n\t\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void update(Student student) {\r\n\t\tentityManager.merge(student);\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void delete(Long id) {\r\n\t\tStudent student = entityManager.find(Student.class, id);\r\n\t\tentityManager.remove(student);\r\n\t}\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-main-class",children:"2\ufe0f\u20e3 Main Class"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Selanjutnya pada main class kita akan menjalankan proses delete data:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t// Method ini akan mencetak di command line\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(StudentDAO studentDAO) {\r\n\t\treturn runner -> {\r\n\r\n\t\tdeleteStudent(studentDAO);\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate void deleteStudent(StudentDAO studentDAO) {\r\n\t\tLong id = 8L; // sesuiakan dengan id student yang ingin di hapus\r\n\t\tSystem.out.println("Delete Student with id: " + id);\r\n\t\tstudentDAO.delete(id);\r\n\t}\r\n}\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Jika sukses maka outputnya sebagai berikut:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Delete Student with id: 6\r\nHibernate: select s1_0.id,s1_0.email,s1_0.first_name,s1_0.last_name from student s1_0 where s1_0.id=?\r\nHibernate: delete from student where id=?\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cek database apakah data sudah terhapus:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mysql> select * from student;\r\n+----+-------------------+------------+-----------+\r\n| id | email             | first_name | last_name |\r\n+----+-------------------+------------+-----------+\r\n|  1 | ucup@gmail.com    | Ucup       | Topekox   |\r\n|  2 | adep@gmail.com    | Ade        | Agustian  |\r\n|  3 | azwar@gmail.com   | Azwar      | Anas      |\r\n|  4 | munir@gmail.com   | Abdul      | Munir     |\r\n|  5 | cantika@gmail.com | Made       | Cantika   |\r\n+----+-------------------+------------+-----------+\r\n5 rows in set (0.00 sec)\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Source Code"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/06-belajar-hibernate-delete-data",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/06-belajar-hibernate-delete-data"})]})})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453(e,n,a){a.d(n,{R:()=>s,x:()=>d});var t=a(96540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);