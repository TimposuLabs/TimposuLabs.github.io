"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[7188],{28453(n,e,t){t.d(e,{R:()=>i,x:()=>o});var a=t(96540);const s={},r=a.createContext(s);function i(n){const e=a.useContext(r);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),a.createElement(r.Provider,{value:e},n.children)}},28511(n,e,t){t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/one-to-many-create","title":"One-to-Many Create","description":"Hibernate","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/15-one-to-many-create.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/one-to-many-create","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many-create","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"One-to-Many Create"},"sidebar":"tutorialSidebar","previous":{"title":"One-to-Many Mapping","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many"},"next":{"title":"Fetch Type: Eager vs Lazy","permalink":"/spring/springboot/springboot-jpa-hibernate/eager-lazy"}}');var s=t(74848),r=t(28453);const i={sidebar_position:15,title:"One-to-Many Create"},o=void 0,l={},d=[{value:"1\ufe0f\u20e3 Entity Student (Sisi &quot;Many&quot; / Owner)",id:"1\ufe0f\u20e3-entity-student-sisi-many--owner",level:2},{value:"2\ufe0f\u20e3 Entity Classes (Sisi &quot;One&quot; / Inverse)",id:"2\ufe0f\u20e3-entity-classes-sisi-one--inverse",level:2},{value:"3\ufe0f\u20e3 Main Class",id:"3\ufe0f\u20e3-main-class",level:2}];function c(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Hibernate",src:t(40963).A+"",width:"782",height:"310"})}),"\n",(0,s.jsx)(e.p,{children:"Pada materi sebelumnya kita sudah memiliki Entity:"}),"\n",(0,s.jsx)(e.h2,{id:"1\ufe0f\u20e3-entity-student-sisi-many--owner",children:'1\ufe0f\u20e3 Entity Student (Sisi "Many" / Owner)'}),"\n",(0,s.jsxs)(e.p,{children:["Sisi ini yang memegang ",(0,s.jsx)(e.code,{children:"@JoinColumn"}),"."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Entity\r\n@Table(name = "student")\r\npublic class Student {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\t\r\n\t@Column(name = "first_name")\r\n\tprivate String firstName;\r\n\t\r\n\t@Column(name = "last_name")\r\n\tprivate String lastName;\r\n\t\r\n\t@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\t@JoinColumn(name = "class_id")\r\n\tprivate Classes classes;\r\n\r\n\t// Setter & Getter\r\n\r\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"2\ufe0f\u20e3-entity-classes-sisi-one--inverse",children:'2\ufe0f\u20e3 Entity Classes (Sisi "One" / Inverse)'}),"\n",(0,s.jsxs)(e.p,{children:["Sisi ini menggunakan ",(0,s.jsx)(e.code,{children:"mappedBy"})," dan memiliki koleksi (",(0,s.jsx)(e.code,{children:"List"})," atau ",(0,s.jsx)(e.code,{children:"Set"}),")."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Entity\r\n@Table(name = "classes")\r\npublic class Classes {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\t\r\n\t@Column(name = "class_name")\r\n\tprivate String className;\r\n\t\r\n\t@OneToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\t@JoinColumn(name = "teacher_id")\r\n\tprivate Teacher teacher;\r\n\t\r\n\t@OneToMany(mappedBy = "classes", cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n\tList<Student> students = new ArrayList<>();\r\n\r\n\r\n\t// HELPER METHOD: Sangat penting untuk sinkronisasi 2 arah di memori\r\n\t// menambah method \'add()\' memastikan kedua sisi terhubung secara konsisten dalam memori Java dengan Bi-Direction\r\n\tpublic void add(Student student) {\r\n\t\tif (students == null) {\r\n\t\t\tstudents = new ArrayList<>();\t\t\t\r\n\t\t}\r\n\t\tstudents.add(student);\r\n\t\t\r\n\t\tif (student != null) {\r\n\t\t\tstudent.setClasses(this);\r\n\t\t}\r\n\t}\r\n\r\n\t// Setter & Getter\r\n\r\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"3\ufe0f\u20e3-main-class",children:"3\ufe0f\u20e3 Main Class"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Pada main class application kita akan membuat ",(0,s.jsx)(e.code,{children:"Classes"})," dengan berisi data ",(0,s.jsx)(e.code,{children:"Student"}),":"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t// Bean ini akan dieksekusi di command line\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(SchoolDAO dao) {\r\n\t\treturn runner -> {\r\n\t\t\t\r\n\t\t\tcreateClassWithStudent(dao);\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\tprivate void createClassWithStudent(SchoolDAO dao) {\r\n\t\tTeacher teacher = new Teacher("Hatake", "Kakashi");\r\n\t\t\r\n\t\tClasses class10 = new Classes("Kelas 10", teacher);\r\n\t\t\r\n\t\tStudent naruto = new Student("Uzumaki", "Naruto");\r\n\t\tStudent sasuke = new Student("Uciha", "Sazuke");\r\n\t\tStudent sakura = new Student("Haruno", "Sakura");\r\n\t\t\r\n\t\tclass10.add(naruto);\r\n\t\tclass10.add(sasuke);\r\n\t\tclass10.add(sakura);\r\n\t\t\r\n\t\tdao.saveClasses(class10);\r\n\t\t\r\n\t\tSystem.out.println("Saved classes: " + class10);\r\n\t\tSystem.out.println("List student: " + class10.getStudents());\r\n\t}\r\n\r\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Output pada Hibernate SQL:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"Hibernate: insert into teacher (first_name,last_name) values (?,?)\r\nHibernate: insert into classes (class_name,teacher_id) values (?,?)\r\nHibernate: insert into student (class_id,first_name,last_name) values (?,?,?)\r\nHibernate: insert into student (class_id,first_name,last_name) values (?,?,?)\r\nHibernate: insert into student (class_id,first_name,last_name) values (?,?,?)\r\nSaved classes: Class [id=4, className=Kelas 10, teacher=Guru [id=4, firstName=Hatake, lastName=Kakashi]]\r\nList student: [Student [id=7, firstName=Uzumaki, lastName=Naruto], Student [id=8, firstName=Uciha, lastName=Sazuke], Student [id=9, firstName=Haruno, lastName=Sakura]]\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Cek pada databases:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"mysql> select * from classes;\r\n+----+------------+------------+\r\n| id | class_name | teacher_id |\r\n+----+------------+------------+\r\n|  1 | Kelas 10   |          5 |\r\n+----+------------+------------+\r\n1 row in set (0.00 sec)\r\n\r\nmysql> select * from student;\r\n+----+------------+-----------+----------+\r\n| id | first_name | last_name | class_id |\r\n+----+------------+-----------+----------+\r\n|  1 | Uzumaki    | Naruto    |        1 |\r\n|  2 | Uciha      | Sazuke    |        1 |\r\n|  3 | Haruno     | Sakura    |        1 |\r\n+----+------------+-----------+----------+\r\n3 rows in set (0.01 sec)\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Source Code"}),": ",(0,s.jsx)(e.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/04-hibernate-one-to-many",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/04-hibernate-one-to-many"})]})})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},40963(n,e,t){t.d(e,{A:()=>a});const a=t.p+"assets/images/one-to-many2-00fb2d0cbe6ed69f3fb5b85aae37a8e9.png"}}]);