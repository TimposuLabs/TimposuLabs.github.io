"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[43277],{28453(n,e,t){t.d(e,{R:()=>s,x:()=>l});var a=t(96540);const r={},i=a.createContext(r);function s(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),a.createElement(i.Provider,{value:e},n.children)}},62761(n,e,t){t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/create-data","title":"Create Data","description":"Menyimpan data ke database (CREATE) menggunakan Hibernate melibatkan pengubahan objek Java (Entity) menjadi baris baru dalam tabel database.","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/03-create-data.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/create-data","permalink":"/spring/springboot/springboot-jpa-hibernate/create-data","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Create Data"},"sidebar":"tutorialSidebar","previous":{"title":"Mapping Entity","permalink":"/spring/springboot/springboot-jpa-hibernate/mapping-entity"},"next":{"title":"Read Data","permalink":"/spring/springboot/springboot-jpa-hibernate/read-data"}}');var r=t(74848),i=t(28453);const s={sidebar_position:3,title:"Create Data"},l=void 0,d={},o=[{value:"1\ufe0f\u20e3 Entity",id:"1\ufe0f\u20e3-entity",level:2},{value:"2\ufe0f\u20e3 Repository / DAO",id:"2\ufe0f\u20e3-repository--dao",level:2},{value:"\u270d\ufe0f Penjelasan",id:"\ufe0f-penjelasan",level:2},{value:"1. <code>@Repository</code>",id:"1-repository",level:3},{value:"2. <code>@Transactional</code>",id:"2-transactional",level:3},{value:"3. <code>EntityManager</code>",id:"3-entitymanager",level:3},{value:"4. <code>entityManager.persist(student)</code>",id:"4-entitymanagerpersiststudent",level:3},{value:"3\ufe0f\u20e3 Main Class",id:"3\ufe0f\u20e3-main-class",level:2}];function u(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"Menyimpan data ke database (CREATE) menggunakan Hibernate melibatkan pengubahan objek Java (Entity) menjadi baris baru dalam tabel database."}),"\n",(0,r.jsx)(e.h2,{id:"1\ufe0f\u20e3-entity",children:"1\ufe0f\u20e3 Entity"}),"\n",(0,r.jsxs)(e.p,{children:["Kita akan menggunakan entity ",(0,r.jsx)(e.code,{children:"Student"})," yang telah kita bahas sebelumnya."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'import jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = "student")\r\npublic class Student {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\t@Column(name = "first_name")\r\n\tprivate String firstName;\r\n\t\r\n\t@Column(name = "last_name")\r\n\tprivate String lastName;\r\n\t\r\n\t@Column(name = "email")\r\n\tprivate String email;\r\n\r\n\tpublic Student() {\r\n\t}\r\n\r\n\tpublic Student(String firstName, String lastName, String email) {\r\n\t\tthis.firstName = firstName;\r\n\t\tthis.lastName = lastName;\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\tpublic Long getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Long id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getFirstName() {\r\n\t\treturn firstName;\r\n\t}\r\n\r\n\tpublic void setFirstName(String firstName) {\r\n\t\tthis.firstName = firstName;\r\n\t}\r\n\r\n\tpublic String getLastName() {\r\n\t\treturn lastName;\r\n\t}\r\n\r\n\tpublic void setLastName(String lastName) {\r\n\t\tthis.lastName = lastName;\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn "Student [id=" + id + ", firstName=" + firstName + ", lastName=" + lastName + ", email=" + email + "]";\r\n\t}\r\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"2\ufe0f\u20e3-repository--dao",children:"2\ufe0f\u20e3 Repository / DAO"}),"\n",(0,r.jsxs)(e.p,{children:["Kita akan membuat Layer ",(0,r.jsx)(e.code,{children:"Repository"})," atau DAO (Data Access Object) yang nantinya akan berinteraksi ke database."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Interface ",(0,r.jsx)(e.code,{children:"StudentDAO"}),":"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import com.timposulabs.belajar.entity.Student;\r\n\r\npublic interface StudentDAO {\r\n\r\n\tvoid save(Student student);\r\n}\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Selanjutnya membuat implementasi ",(0,r.jsx)(e.code,{children:"StudentDAO"})," yaitu ",(0,r.jsx)(e.code,{children:"StudentDAOImpl"})," dengan memberikan anotasi ",(0,r.jsx)(e.code,{children:"@Repository"})," untuk memberitahu Spring bahwa ini adalah Repository:"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"import org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport com.timposulabs.belajar.entity.Student;\r\n\r\nimport jakarta.persistence.EntityManager;\r\n\r\n@Repository\r\npublic class StudentDAOImpl implements StudentDAO {\r\n\r\n\tprivate EntityManager entityManager;\r\n\t\r\n\tpublic StudentDAOImpl(EntityManager entityManager) {\r\n\t\tthis.entityManager = entityManager;\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void save(Student student) {\r\n\t\tentityManager.persist(student);\r\n\t}\r\n\t\r\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-penjelasan",children:"\u270d\ufe0f Penjelasan"}),"\n",(0,r.jsxs)(e.p,{children:["Berikut adalah penjelasan detail mengenai kode ",(0,r.jsx)(e.code,{children:"StudentDAOImpl"})," yang menggunakan pendekatan manual (Low-Level) dengan ",(0,r.jsx)(e.code,{children:"EntityManager"}),", yang merupakan inti dari cara kerja Hibernate di balik layar."]}),"\n",(0,r.jsxs)(e.h3,{id:"1-repository",children:["1. ",(0,r.jsx)(e.code,{children:"@Repository"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fungsi"}),": Menandai kelas ini sebagai komponen pendukung akses data (DAO/Data Access Object)."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Peran"}),": Memberitahu Spring untuk mengelola kelas ini sebagai ",(0,r.jsx)(e.em,{children:"Bean"}),". Selain itu, Spring akan secara otomatis menerjemahkan pengecualian (exception) database yang kompleks menjadi pengecualian yang lebih mudah dipahami oleh pengembang Java."]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"2-transactional",children:["2. ",(0,r.jsx)(e.code,{children:"@Transactional"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fungsi"}),": Mengelola transaksi database secara otomatis."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Peran"}),": Setiap kali metode ",(0,r.jsx)(e.code,{children:"save"})," dipanggil, Spring akan memulai transaksi baru. Jika proses berhasil, transaksi akan di-",(0,r.jsx)(e.strong,{children:"commit"})," (disimpan permanen). Jika terjadi error, transaksi akan di-",(0,r.jsx)(e.strong,{children:"rollback"}),' (dibatalkan), sehingga integritas data terjaga dan tidak ada data "setengah jadi" di database.']}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"3-entitymanager",children:["3. ",(0,r.jsx)(e.code,{children:"EntityManager"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fungsi"}),": Ini adalah Interface utama di JPA/Hibernate untuk berinteraksi dengan database."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Peran"}),": ",(0,r.jsx)(e.code,{children:"EntityManager"})," bertanggung jawab untuk mengelola siklus hidup entitas (seperti menyimpan, mencari, atau menghapus objek). Di sini, Spring secara otomatis menyuntikkan (inject) ",(0,r.jsx)(e.code,{children:"EntityManager"})," yang sudah dikonfigurasi melalui ",(0,r.jsx)(e.strong,{children:"Constructor Injection"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"4-entitymanagerpersiststudent",children:["4. ",(0,r.jsx)(e.code,{children:"entityManager.persist(student)"})]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fungsi"}),": Metode utama untuk melakukan operasi ",(0,r.jsx)(e.strong,{children:"Create"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Cara Kerja"}),":","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Mengubah status objek ",(0,r.jsx)(e.code,{children:"student"})," dari ",(0,r.jsx)(e.em,{children:"Transient"})," (hanya ada di memori Java) menjadi ",(0,r.jsx)(e.em,{children:"Managed/Persistent"})," (dikelola oleh Hibernate)."]}),"\n",(0,r.jsxs)(e.li,{children:["Hibernate kemudian akan menyusun perintah SQL ",(0,r.jsx)(e.code,{children:"INSERT INTO student ..."})," untuk dijalankan di database."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"3\ufe0f\u20e3-main-class",children:"3\ufe0f\u20e3 Main Class"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Selanjutnya pada main class kita akan menjalankan proses penyimpanan data:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t// Method ini akan mencetak di command line\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(StudentDAO studentDAO) {\r\n\t\treturn runner -> {\r\n\t\t\t\r\n\t\t\tcreateStudent(studentDAO);\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate void createStudent(StudentDAO studentDAO) {\r\n\t\tSystem.out.println("Creating Student...");\r\n\t\tStudent student = new Student("Ucup", "Topekox", "ucup@gmail.com");\r\n\t\tstudentDAO.save(student);\r\n\t\tSystem.out.println("Saved student.. with id " + student.getId());\r\n\t}\r\n}\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Jika sukses makan akan menghasilkan output command line:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Creating Student...\r\nHibernate: insert into student (email,first_name,last_name) values (?,?,?)\r\nSaved student.. with id 1\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Cek Database:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"mysql> select * from student;\r\n+----+----------------+------------+-----------+\r\n| id | email          | first_name | last_name |\r\n+----+----------------+------------+-----------+\r\n|  1 | ucup@gmail.com | Ucup       | Topekox   |\r\n+----+----------------+------------+-----------+\r\n1 row in set (0.01 sec)\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Untuk membuat multiple save data kita dapat membuat method baru:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@Bean\r\npublic CommandLineRunner commandLineRunner(StudentDAO studentDAO) {\r\n    return runner -> {\r\n        \r\n        createMultipleStudent(studentDAO);\r\n\r\n    };\r\n}\r\n    \r\nprivate void createMultipleStudent(StudentDAO studentDAO) {\r\n    System.out.println("Creating Student...");\r\n    Student student1 = new Student("Ade", "Agustian", "adep@gmail.com");\r\n    Student student2 = new Student("Azwar", "Anas", "azwar@gmail.com");\r\n    Student student3 = new Student("Abdul", "Munir", "munir@gmail.com");\r\n    Student student4 = new Student("Made", "Cantika", "cantika@gmail.com");\r\n    \r\n    studentDAO.save(student1);\r\n    studentDAO.save(student2);\r\n    studentDAO.save(student3);\r\n    studentDAO.save(student4);\r\n    \r\n    System.out.println("Saved multiple student.. " + List.of(student1.toString(), student2.toString(), student3.toString(), student4).toString());\r\n}\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Jika sukses makan akan menghasilkan output command line:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Creating Student...\r\nHibernate: insert into student (email,first_name,last_name) values (?,?,?)\r\nHibernate: insert into student (email,first_name,last_name) values (?,?,?)\r\nHibernate: insert into student (email,first_name,last_name) values (?,?,?)\r\nHibernate: insert into student (email,first_name,last_name) values (?,?,?)\r\nSaved multiple student.. [Student [id=2, firstName=Ade, lastName=Agustian, email=adep@gmail.com], Student [id=3, firstName=Azwar, lastName=Anas, email=azwar@gmail.com], Student [id=4, firstName=Abdul, lastName=Munir, email=munir@gmail.com], Student [id=5, firstName=Made, lastName=Cantika, email=cantika@gmail.com]]\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Cek Database:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"mysql> select * from student;\r\n+----+-------------------+------------+-----------+\r\n| id | email             | first_name | last_name |\r\n+----+-------------------+------------+-----------+\r\n|  1 | ucup@gmail.com    | Ucup       | Topekox   |\r\n|  2 | adep@gmail.com    | Ade        | Agustian  |\r\n|  3 | azwar@gmail.com   | Azwar      | Anas      |\r\n|  4 | munir@gmail.com   | Abdul      | Munir     |\r\n|  5 | cantika@gmail.com | Made       | Cantika   |\r\n+----+-------------------+------------+-----------+\r\n5 rows in set (0.00 sec)\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"info",children:(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Source Code"}),": ",(0,r.jsx)(e.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/02-belajar-hibernate-save-data",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/02-belajar-hibernate-save-data"})]})})]})}function c(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}}}]);