"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[6647],{25427(n,a,e){e.r(a),e.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>c,frontMatter:()=>s,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/jpql","title":"JPQL","description":"JPQL (Java Persistence Query Language) adalah bahasa query berorientasi objek yang digunakan untuk melakukan operasi pada database dalam ekosistem Java Persistence API (JPA) dan Hibernate.","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/05-jpql.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/jpql","permalink":"/spring/springboot/springboot-jpa-hibernate/jpql","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"JPQL"},"sidebar":"tutorialSidebar","previous":{"title":"Read Data","permalink":"/spring/springboot/springboot-jpa-hibernate/read-data"},"next":{"title":"Update Data","permalink":"/spring/springboot/springboot-jpa-hibernate/update-data"}}');var r=e(74848),i=e(28453);const s={sidebar_position:5,title:"JPQL"},d=void 0,l={},u=[{value:"1\ufe0f\u20e3 Berorientasi Objek, Bukan Tabel",id:"1\ufe0f\u20e3-berorientasi-objek-bukan-tabel",level:2},{value:"2\ufe0f\u20e3 Fitur Utama JPQL",id:"2\ufe0f\u20e3-fitur-utama-jpql",level:2},{value:"3\ufe0f\u20e3 Cara Kerja di Belakang Layar",id:"3\ufe0f\u20e3-cara-kerja-di-belakang-layar",level:2},{value:"4\ufe0f\u20e3 Contoh Penulisan JPQL Modern",id:"4\ufe0f\u20e3-contoh-penulisan-jpql-modern",level:2},{value:"\ud83d\udee2\ufe0f Repository / DAO",id:"\ufe0f-repository--dao",level:2},{value:"\u25b6\ufe0f Main Class",id:"\ufe0f-main-class",level:2}];function o(n){const a={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"JPQL (Java Persistence Query Language)"})," adalah bahasa query berorientasi objek yang digunakan untuk melakukan operasi pada database dalam ekosistem Java Persistence API (JPA) dan Hibernate."]}),"\n",(0,r.jsx)(a.p,{children:"Meskipun terlihat sangat mirip dengan SQL (Structured Query Language), JPQL memiliki perbedaan mendasar dalam cara kerjanya. Berikut adalah poin-poin penting untuk memahaminya:"}),"\n",(0,r.jsx)(a.h2,{id:"1\ufe0f\u20e3-berorientasi-objek-bukan-tabel",children:"1\ufe0f\u20e3 Berorientasi Objek, Bukan Tabel"}),"\n",(0,r.jsx)(a.p,{children:'Perbedaan utama JPQL dengan SQL adalah apa yang "diajak bicara":'}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"SQL"}),": Berinteraksi langsung dengan tabel dan kolom di database."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"JPQL"}),": Berinteraksi dengan ",(0,r.jsx)(a.strong,{children:"Class Entity"})," dan atribut/field di Java."]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Contoh Perbandingan:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"SQL"}),": ",(0,r.jsx)(a.code,{children:"SELECT * FROM tbl_student WHERE first_name = 'Budi'"}),";"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"JPQL"}),": ",(0,r.jsx)(a.code,{children:"SELECT s FROM Student s WHERE s.firstName = 'Budi'"}),";\r\n",(0,r.jsxs)(a.em,{children:["(Perhatikan bahwa ",(0,r.jsx)(a.code,{children:"Student"})," merujuk pada nama Class Java, dan ",(0,r.jsx)(a.code,{children:"firstName"})," merujuk pada variabel di kelas tersebut)."]})]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"2\ufe0f\u20e3-fitur-utama-jpql",children:"2\ufe0f\u20e3 Fitur Utama JPQL"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Database Independent"}),": Anda menulis satu kueri JPQL, dan Hibernate akan otomatis menerjemahkannya ke dialek database apa pun yang Anda gunakan (MySQL, PostgreSQL, Oracle, dll)."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Case Sensitive"})," (untuk Nama Kelas): JPQL tidak peduli jika kata kunci seperti ",(0,r.jsx)(a.code,{children:"SELECT atau FROM"})," ditulis huruf kecil, tetapi ",(0,r.jsx)(a.strong,{children:"sangat peduli"})," pada nama kelas dan atribut. ",(0,r.jsx)(a.code,{children:"Student"})," tidak sama dengan ",(0,r.jsx)(a.code,{children:"student"}),"."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Mendukung Relasi Objek"}),": JPQL sangat kuat dalam menangani hubungan antar objek (seperti ",(0,r.jsx)(a.code,{children:"JOIN"}),") karena dapat memahami mapping ",(0,r.jsx)(a.code,{children:"@OneToMany"})," atau ",(0,r.jsx)(a.code,{children:"@ManyToOne"}),"."]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"3\ufe0f\u20e3-cara-kerja-di-belakang-layar",children:"3\ufe0f\u20e3 Cara Kerja di Belakang Layar"}),"\n",(0,r.jsx)(a.p,{children:"Saat Anda menjalankan kueri JPQL, prosesnya adalah:"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Aplikasi"})," mengirim queri JPQL ke ",(0,r.jsx)(a.strong,{children:"EntityManager"}),"."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Hibernate/JPA Provider"})," menerjemahkan JPQL tersebut menjadi ",(0,r.jsx)(a.strong,{children:"SQL Murni"})," berdasarkan database yang terhubung."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Database"})," mengeksekusi SQL tersebut dan mengembalikan hasilnya."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Hibernate"})," mengubah hasil (baris database) kembali menjadi ",(0,r.jsx)(a.strong,{children:"Object Java (Entity)"}),"."]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"4\ufe0f\u20e3-contoh-penulisan-jpql-modern",children:"4\ufe0f\u20e3 Contoh Penulisan JPQL Modern"}),"\n",(0,r.jsx)(a.p,{children:"Penulisan JPQL sering kali disingkat untuk kemudahan:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Mengambil semua data"}),":"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"FROM Student"})," (Secara otomatis dianggap ",(0,r.jsx)(a.code,{children:"SELECT s FROM Student s"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Pencarian dengan parameter (Aman dari SQL Injection)"}),":"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.code,{children:"SELECT s FROM Student s WHERE s.email = :emailParameter"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Update data massal"}),":"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.code,{children:"UPDATE Student s SET s.lastName = 'Sanjaya' WHERE s.id = 1"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:'JPQL adalah "bahasa jembatan" yang memungkinkan Anda tetap berpikir sebagai programmer Java (berbasis objek) tanpa harus terlalu pusing dengan detail sintaksis database yang berbeda-beda.'}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(a.p,{children:["Pada ",(0,r.jsx)(a.a,{href:"/spring/springboot/springboot-jpa-hibernate/read-data",children:"tutorial sebelumnya"})," kita akan menggunakan ",(0,r.jsx)(a.code,{children:"EntityManager"})," untuk mengambil satu baris data jika Anda sudah tahu ID-nya. Jika ingin mengambil semua data atau data dengan kriteria tertentu, kita bisa menggunakan ",(0,r.jsx)(a.strong,{children:"JPQL (Java Persistence Query Language)"}),". JPQL mirip SQL, tetapi ia mereferensikan ",(0,r.jsx)(a.strong,{children:"Nama Class/Entity"}),", bukan nama tabel database"]}),"\n",(0,r.jsx)(a.h2,{id:"\ufe0f-repository--dao",children:"\ud83d\udee2\ufe0f Repository / DAO"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Menambahkan method baru pada interface DAO dengan menambahkan method ",(0,r.jsx)(a.code,{children:"findAll"})," dan ",(0,r.jsx)(a.code,{children:"findByLastName"}),":"]}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"public interface StudentDAO {\r\n\r\n\tvoid save(Student student);\r\n\t\r\n\tStudent findById(Long id);\r\n\t\r\n\tList<Student> findAll();\r\n\t\r\n\tList<Student> findByLastName(String lastName);\r\n}\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Implementasi DAO:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'import java.util.List;\r\n\r\nimport org.springframework.stereotype.Repository;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport com.timposulabs.belajar.entity.Student;\r\n\r\nimport jakarta.persistence.EntityManager;\r\nimport jakarta.persistence.TypedQuery;\r\n\r\n@Repository\r\npublic class StudentDAOImpl implements StudentDAO {\r\n\r\n\tprivate EntityManager entityManager;\r\n\t\r\n\tpublic StudentDAOImpl(EntityManager entityManager) {\r\n\t\tthis.entityManager = entityManager;\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void save(Student student) {\r\n\t\tentityManager.persist(student);\r\n\t}\r\n\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic Student findById(Long id) {\r\n\t\treturn entityManager.find(Student.class, id);\r\n\t}\r\n\t\t\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic List<Student> findAll() {\t\t\r\n\t\tTypedQuery<Student> query = entityManager.createQuery("FROM Student ORDER BY lastName asc", Student.class);\t// jika query berupa update data (CREATE, UPDATE, DELETE) tambhakan method \'executeUpdate()\'\r\n\t\treturn query.getResultList();\r\n\t}\r\n\t\r\n\t@Override\r\n\t@Transactional(readOnly = true)\r\n\tpublic List<Student> findByLastName(String lastName) {\r\n\t\tTypedQuery<Student> query = entityManager.createQuery("FROM Student WHERE lastName=:theLastName", Student.class);\r\n\t\tquery.setParameter("theLastName", lastName);\r\n\t\treturn query.getResultList();\r\n\t}\r\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"\ufe0f-main-class",children:"\u25b6\ufe0f Main Class"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Selanjutnya pada main class kita akan menjalankan proses read data:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n\t// Method ini akan mencetak di command line\r\n\t@Bean\r\n\tpublic CommandLineRunner commandLineRunner(StudentDAO studentDAO) {\r\n\t\treturn runner -> {\r\n\r\n\t\t\tfindAllQuery(studentDAO);\r\n\t\t\t\r\n\t\t\tfindStudentByLastName(studentDAO);\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate void findAllQuery(StudentDAO studentDAO) {\r\n\t\tList<Student> studentList = studentDAO.findAll();\r\n\t\t\r\n\t\tfor (var student : studentList) {\r\n\t\t\tSystem.out.println(student);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void findStudentByLastName(StudentDAO studentDAO) {\r\n\t\tList<Student> studentList = studentDAO.findByLastName("Topekox");\r\n\t\t\r\n\t\tfor (var student : studentList) {\r\n\t\t\tSystem.out.println(student);\r\n\t\t}\t\t\r\n\t}\r\n}\n'})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Jika sukses maka outputnya sebagai berikut:"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"Hibernate: select s1_0.id,s1_0.email,s1_0.first_name,s1_0.last_name from student s1_0 order by s1_0.last_name\r\nMenampilkan semua data student: \r\nStudent [id=2, firstName=Ade, lastName=Agustian, email=adep@gmail.com]\r\nStudent [id=3, firstName=Azwar, lastName=Anas, email=azwar@gmail.com]\r\nStudent [id=5, firstName=Made, lastName=Cantika, email=cantika@gmail.com]\r\nStudent [id=4, firstName=Abdul, lastName=Munir, email=munir@gmail.com]\r\nStudent [id=6, firstName=Inaya, lastName=Rusli, email=inay@gmail.com]\r\nStudent [id=1, firstName=Ucup, lastName=Topekox, email=ucup@gmail.com]\r\nHibernate: select s1_0.id,s1_0.email,s1_0.first_name,s1_0.last_name from student s1_0 where s1_0.last_name=?\r\nMenampilkan semua data student dengan by Lastname:\r\nStudent [id=1, firstName=Ucup, lastName=Topekox, email=ucup@gmail.com]\n"})}),"\n",(0,r.jsx)(a.admonition,{type:"tip",children:(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Baca Juga"}),": ",(0,r.jsx)(a.a,{href:"https://docs.oracle.com/cd/E17904_01/apirefs.1111/e13946/ejb3_langref.html",children:"https://docs.oracle.com/cd/E17904_01/apirefs.1111/e13946/ejb3_langref.html"})]})}),"\n",(0,r.jsx)(a.admonition,{type:"info",children:(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Source Code"}),": ",(0,r.jsx)(a.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/04-belajar-hibernate-query-jpql",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-basic/tree/main/04-belajar-hibernate-query-jpql"})]})})]})}function c(n={}){const{wrapper:a}={...(0,i.R)(),...n.components};return a?(0,r.jsx)(a,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},28453(n,a,e){e.d(a,{R:()=>s,x:()=>d});var t=e(96540);const r={},i=t.createContext(r);function s(n){const a=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(a):{...a,...n}},[a,n])}function d(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),t.createElement(i.Provider,{value:a},n.children)}}}]);