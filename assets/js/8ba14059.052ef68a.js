"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[33145],{28453(e,n,a){a.d(n,{R:()=>l,x:()=>t});var i=a(96540);const r={},s=i.createContext(r);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}},51092(e,n,a){a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"docker-image-advance/instruksi-copy","title":"Dockerfile COPY","description":"\ud83e\udd14 Apa itu Instruksi Dockerfile COPY?","source":"@site/tutorial/docker/07-docker-image-advance/06-instruksi-copy.md","sourceDirName":"07-docker-image-advance","slug":"/docker-image-advance/instruksi-copy","permalink":"/docker/docker-image-advance/instruksi-copy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Dockerfile COPY"},"sidebar":"tutorialSidebar","previous":{"title":"Dockerfile RUN","permalink":"/docker/docker-image-advance/instruksi-run"},"next":{"title":"Dockerfile ADD","permalink":"/docker/docker-image-advance/instruksi-add"}}');var r=a(74848),s=a(28453);const l={sidebar_position:6,title:"Dockerfile COPY"},t=void 0,d={},c=[{value:"\ud83e\udd14 Apa itu Instruksi Dockerfile <code>COPY</code>?",id:"-apa-itu-instruksi-dockerfile-copy",level:2},{value:"1\ufe0f\u20e3 Sintaks Dasar",id:"1\ufe0f\u20e3-sintaks-dasar",level:2},{value:"2\ufe0f\u20e3 Fitur Utama",id:"2\ufe0f\u20e3-fitur-utama",level:2},{value:"A. Mengubah Kepemilikan <code>(--chown)</code>",id:"a-mengubah-kepemilikan---chown",level:3},{value:"B. Menyalin dari Stage Lain <code>(--from)</code>",id:"b-menyalin-dari-stage-lain---from",level:3},{value:"C. Mendukung Wildcards",id:"c-mendukung-wildcards",level:3},{value:"3\ufe0f\u20e3 Aturan Penting &quot;Build Context&quot;",id:"3\ufe0f\u20e3-aturan-penting-build-context",level:2},{value:"4\ufe0f\u20e3 Efek terhadap Layer Caching",id:"4\ufe0f\u20e3-efek-terhadap-layer-caching",level:2}];function o(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h2,{id:"-apa-itu-instruksi-dockerfile-copy",children:["\ud83e\udd14 Apa itu Instruksi Dockerfile ",(0,r.jsx)(n.code,{children:"COPY"}),"?"]}),"\n",(0,r.jsxs)(n.p,{children:["Instruksi ",(0,r.jsx)(n.code,{children:"COPY"})," digunakan untuk menyalin file atau direktori dari mesin lokal (host) ke dalam image Docker selama proses pembuatan (build)."]}),"\n",(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-sintaks-dasar",children:"1\ufe0f\u20e3 Sintaks Dasar"}),"\n",(0,r.jsx)(n.p,{children:"Sintaks umum instruksi COPY adalah:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"COPY [sumber] [tujuan]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<sumber>"})}),": Lokasi file/direktori di mesin lokal (relatif terhadap lokasi Dockerfile)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"<tujuan>"})}),": Path di dalam image tempat file akan disalin."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Contoh 1"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"COPY app.jar /app/app.jar\nCOPY config/ /etc/config/\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Contoh 2"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'ARG ubuntu_version=24.04\nFROM ubuntu:${ubuntu_version}\nLABEL version="1.0"\nLABEL maintainer="Ucup Topekox" email="ucup@gmail.com" environtment="development"\nENV DATABASE_NAME=book_store\nRUN apt-get update && apt-get install openjdk-21-jre-headless -y\nCOPY Hello.class Hello.class\nCMD ["/usr/bin/java", "Hello"]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-fitur-utama",children:"2\ufe0f\u20e3 Fitur Utama"}),"\n",(0,r.jsxs)(n.h3,{id:"a-mengubah-kepemilikan---chown",children:["A. Mengubah Kepemilikan ",(0,r.jsx)(n.code,{children:"(--chown)"})]}),"\n",(0,r.jsx)(n.p,{children:"Sangat disarankan menjalankan aplikasi sebagai user non-root. Anda bisa langsung mengatur pemilik file saat menyalinnya agar aplikasi memiliki izin akses yang tepat."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# Menyalin file dan menjadikannya milik user 'ucup'\nCOPY --chown=ucup:ucup target/*.jar app.jar\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"b-menyalin-dari-stage-lain---from",children:["B. Menyalin dari Stage Lain ",(0,r.jsx)(n.code,{children:"(--from)"})]}),"\n",(0,r.jsxs)(n.p,{children:["Ini adalah kunci dari ",(0,r.jsx)(n.strong,{children:"Multi-stage Build"}),". Kita bisa menyalin hasil kompilasi dari stage sebelumnya tanpa membawa sampah build tools."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# Menyalin file dari stage bernama 'builder'\nCOPY --from=builder /app/target/app.jar .\n"})}),"\n",(0,r.jsx)(n.h3,{id:"c-mendukung-wildcards",children:"C. Mendukung Wildcards"}),"\n",(0,r.jsx)(n.p,{children:"Kita bisa menggunakan pola karakter untuk menyalin banyak file yang serupa sekaligus."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# Menyalin semua file yang berakhiran .sh\nCOPY *.sh /usr/local/bin/\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-aturan-penting-build-context",children:'3\ufe0f\u20e3 Aturan Penting "Build Context"'}),"\n",(0,r.jsxs)(n.p,{children:["Instruksi ",(0,r.jsx)(n.code,{children:"COPY"})," hanya bisa mengambil file yang berada di dalam ",(0,r.jsx)(n.strong,{children:"Build Context"})," (folder tempat kita menjalankan perintah ",(0,r.jsx)(n.code,{children:"docker build"}),")."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Salah"})," \u274c: ",(0,r.jsx)(n.code,{children:"COPY ../file_luar.txt /app/"}),' (Docker tidak bisa "mengintip" keluar dari foldernya demi alasan keamanan).']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Solusi"})," \u2705 Pindahkan file ke dalam folder yang sama dengan Dockerfile."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"4\ufe0f\u20e3-efek-terhadap-layer-caching",children:"4\ufe0f\u20e3 Efek terhadap Layer Caching"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"COPY"})," sangat sensitif terhadap cache:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Jika isi file yang kita salin berubah (meskipun hanya satu karakter), Docker akan ",(0,r.jsx)(n.strong,{children:"menghapus cache"})," untuk baris tersebut dan semua baris setelahnya."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Strategi"}),": Salin file yang jarang berubah (seperti ",(0,r.jsx)(n.code,{children:"pom.xml"}),") terlebih dahulu, jalankan instalasi library, baru kemudian salin kode sumber (",(0,r.jsx)(n.code,{children:"src"}),")."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);