"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[1766],{28453(t,n,e){e.d(n,{R:()=>o,x:()=>s});var a=e(96540);const i={},r=a.createContext(i);function o(t){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof t?t(n):{...n,...t}},[n,t])}function s(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:o(t.components),a.createElement(r.Provider,{value:n},t.children)}},70683(t,n,e){e.d(n,{A:()=>a});const a=e.p+"assets/images/spring-security9-2a016c3352f8baa86897796189c6514f.png"},72818(t,n,e){e.d(n,{A:()=>a});const a=e.p+"assets/images/spring-security8-292c16f0662243c362899e341017aca5.png"},85953(t,n,e){e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"springboot/springboot-mvc-security/logout","title":"Logout","description":"Materi ini akan membahas cara mengimplementasikan fitur Logout yang aman pada Spring Boot MVC Security. Proses logout tidak hanya sekadar menghapus session, tetapi juga memastikan perlindungan terhadap serangan pembajakan session.","source":"@site/tutorial/spring/springboot/springboot-mvc-security/04-logout.md","sourceDirName":"springboot/springboot-mvc-security","slug":"/springboot/springboot-mvc-security/logout","permalink":"/spring/springboot/springboot-mvc-security/logout","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Logout"},"sidebar":"tutorialSidebar","previous":{"title":"Custom Login Page","permalink":"/spring/springboot/springboot-mvc-security/custom-login-page"},"next":{"title":"Display User ID & Roles","permalink":"/spring/springboot/springboot-mvc-security/display-user-roles"}}');var i=e(74848),r=e(28453);const o={sidebar_position:4,title:"Logout"},s=void 0,l={},u=[{value:"\ud83e\udd14 Apa yang Terjadi Saat Logout?",id:"-apa-yang-terjadi-saat-logout",level:2},{value:"\ud83d\ude80 Implementasi Logout",id:"-implementasi-logout",level:2},{value:"1\ufe0f\u20e3 Konfigurasi pada Security Configuration",id:"1\ufe0f\u20e3-konfigurasi-pada-security-configuration",level:3},{value:"3\ufe0f\u20e3 Menambahkan Tombol Logout pada View (Thymeleaf)",id:"3\ufe0f\u20e3-menambahkan-tombol-logout-pada-view-thymeleaf",level:2},{value:"4\ufe0f\u20e3 Menangani Pesan Logout Sukses",id:"4\ufe0f\u20e3-menangani-pesan-logout-sukses",level:2},{value:"\ud83d\udc4c Best Practice Logout",id:"-best-practice-logout",level:2}];function g(t){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Materi ini akan membahas cara mengimplementasikan fitur ",(0,i.jsx)(n.strong,{children:"Logout"})," yang aman pada Spring Boot MVC Security. Proses logout tidak hanya sekadar menghapus session, tetapi juga memastikan perlindungan terhadap serangan pembajakan session."]}),"\n",(0,i.jsx)(n.h2,{id:"-apa-yang-terjadi-saat-logout",children:"\ud83e\udd14 Apa yang Terjadi Saat Logout?"}),"\n",(0,i.jsx)(n.p,{children:"Ketika proses logout dipicu, Spring Security secara otomatis melakukan beberapa hal berikut:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Menghapus (membatalkan) ",(0,i.jsx)(n.strong,{children:"HTTP Session"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Menghapus ",(0,i.jsx)(n.strong,{children:"SecurityContextHolder"})," (membersihkan identitas pengguna yang sedang login)."]}),"\n",(0,i.jsxs)(n.li,{children:["Menghapus ",(0,i.jsx)(n.strong,{children:"Remember-Me Authentication"})," (jika dikonfigurasi)."]}),"\n",(0,i.jsx)(n.li,{children:"Mengarahkan pengguna kembali ke halaman login atau halaman utama."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-implementasi-logout",children:"\ud83d\ude80 Implementasi Logout"}),"\n",(0,i.jsx)(n.p,{children:"Step by step membuat logout:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Menambahkan konfigurasi logout pada Spring Security Configuration."}),"\n",(0,i.jsx)(n.li,{children:"Membuat logout button di home page."}),"\n",(0,i.jsx)(n.li,{children:"Update login page dengan menambahkan logout message."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"1\ufe0f\u20e3-konfigurasi-pada-security-configuration",children:"1\ufe0f\u20e3 Konfigurasi pada Security Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Secara default, Spring Security sudah mengaktifkan fitur logout pada URL ",(0,i.jsx)(n.code,{children:"/logout"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Configuration\r\npublic class SecurityConfig {\r\n\r\n\t// membuat user yang hanya running di memory\r\n\t@Bean\r\n\tpublic InMemoryUserDetailsManager userDetailsManager() {\r\n\t\t\r\n\t\tUserDetails aco = User.builder()\r\n\t\t\t\t.username("aco")\r\n\t\t\t\t.password("{noop}test123")\r\n\t\t\t\t.roles("GUEST")\r\n\t\t\t\t.build();\r\n\t\t\r\n\t\tUserDetails ade = User.builder()\r\n\t\t\t\t.username("ade")\r\n\t\t\t\t.password("{noop}test123")\r\n\t\t\t\t.roles("GUEST", "USERS")\r\n\t\t\t\t.build();\r\n\t\t\r\n\t\tUserDetails ucup = User.builder()\r\n\t\t\t\t.username("ucup")\r\n\t\t\t\t.password("{noop}test123")\r\n\t\t\t\t.roles("GUEST", "USERS", "ADMIN")\r\n\t\t\t\t.build();\t\t\t\t\r\n\t\t\r\n\t\treturn new InMemoryUserDetailsManager(aco, ade, ucup);\r\n\t}\r\n\t\r\n\t// konfig custom login page\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n\t\t\r\n\t\thttpSecurity.authorizeHttpRequests(configurer -> \r\n\t\t\t\t\tconfigurer\r\n\t\t\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t\t).formLogin(form ->\r\n\t\t\t\t\tform\r\n\t\t\t\t\t\t.loginPage("/loginPage")\r\n\t\t\t\t\t\t.loginProcessingUrl("/authentication")\r\n\t\t\t\t\t\t.permitAll()\r\n\t\t\t\t).logout(logout -> \r\n\t\t\t\t\tlogout.permitAll() // menambahkan aksi logout\r\n\t\t\t\t);\r\n\t\t\r\n\t\treturn httpSecurity.build();\r\n\t}\r\n}\n'})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:["Kita dapat melakukan customise logout untuk ",(0,i.jsx)(n.em,{children:"best practice"}),", dengan beberapa konfigurasi tambahan:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'.logout(logout -> \r\n            logout\r\n                .logoutUrl("/perform_logout") // Opsional: Ubah URL logout default\r\n                .logoutSuccessUrl("/loginPage?logout") // Arahkan ke sini setelah sukses\r\n                .invalidateHttpSession(true) // Hapus session dari server\r\n                .deleteCookies("JSESSIONID") // Hapus cookie di browser\r\n                .permitAll()\r\n    );\n'})})]}),"\n",(0,i.jsx)(n.h2,{id:"3\ufe0f\u20e3-menambahkan-tombol-logout-pada-view-thymeleaf",children:"3\ufe0f\u20e3 Menambahkan Tombol Logout pada View (Thymeleaf)"}),"\n",(0,i.jsxs)(n.p,{children:["Untuk membuat tombol logout, sangat disarankan menggunakan metode ",(0,i.jsx)(n.strong,{children:"POST"})," untuk alasan keamanan (mencegah serangan CSRF).\r\nBerikut adalah contoh implementasi pada file HTML (misalnya ",(0,i.jsx)(n.code,{children:"home.html"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\r\n<html xmlns:th="http://www.thymeleaf.org">\r\n\t<head>\r\n\t\t<title>Belajar Spring CRUD Security</title>\r\n\t\t<meta charset="utf-8">\r\n\t\t<meta name="viewport" content="width=device-width, initial-scale=1">\r\n\t</head>\r\n\t<body>\r\n\t\t<h2>TimposuLabs Company</h2>\r\n\t\t<hr />\r\n\t\tWelcome to our company homepage.\r\n\t\t<hr>\r\n\r\n\t\t<form th:action="@{/logout}" method="post">\r\n\t\t\t<button type="submit">Logout</button>\t\r\n\t\t</form>\r\n\t</body>\r\n</html>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'th:action="@{/logout}"'})}),": Thymeleaf akan otomatis menyisipkan token CSRF tersembunyi ke dalam form ini. Tanpa token ini, permintaan logout akan ditolak demi keamanan."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Spring Security",src:e(72818).A+"",width:"684",height:"528"})}),"\n",(0,i.jsx)(n.h2,{id:"4\ufe0f\u20e3-menangani-pesan-logout-sukses",children:"4\ufe0f\u20e3 Menangani Pesan Logout Sukses"}),"\n",(0,i.jsxs)(n.p,{children:["Kita akan memperbaharui ",(0,i.jsx)(n.code,{children:"login-page.html"})," untuk menangkap parameter ",(0,i.jsx)(n.code,{children:"logout"}),", jika user berhasil keluar, URL akan berubah menjadi ",(0,i.jsx)(n.code,{children:"/loginPage?logout"}),", dan pesan sukses akan muncul:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'\x3c!-- Pesan Logout yang muncul di halaman login setelah sukses logout --\x3e\r\n<div th:if="${param.logout}">\r\n    <div class="alert alert-success py-2" role="alert">\r\n        <small>Anda telah berhasil logout.</small>\r\n    </div>\r\n</div>\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Spring Security",src:e(70683).A+"",width:"816",height:"664"})}),"\n",(0,i.jsx)(n.h2,{id:"-best-practice-logout",children:"\ud83d\udc4c Best Practice Logout"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gunakan POST"}),": Hindari menggunakan link ",(0,i.jsx)(n.code,{children:"<a>"})," (GET) untuk logout karena dapat dipicu secara tidak sengaja oleh ",(0,i.jsx)(n.em,{children:"crawler"})," atau serangan CSRF."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hapus Cookies"}),": Selalu pastikan ",(0,i.jsx)(n.code,{children:"JSESSIONID"})," dihapus agar sesi benar-benar bersih di sisi klien."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Invalidasi Sesi"}),": Pastikan ",(0,i.jsx)(n.code,{children:"invalidateHttpSession(true)"})," tetap aktif (default) untuk mencegah penggunaan kembali ID sesi yang lama."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Source Code"}),": ",(0,i.jsx)(n.a,{href:"https://github.com/TimposuLabs/belajar-springboot-mvc-security/tree/main/05-belajar-springboot-security-logout",children:"https://github.com/TimposuLabs/belajar-springboot-mvc-security/tree/main/05-belajar-springboot-security-logout"})]})})]})}function c(t={}){const{wrapper:n}={...(0,r.R)(),...t.components};return n?(0,i.jsx)(n,{...t,children:(0,i.jsx)(g,{...t})}):g(t)}}}]);