"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[80617],{57578:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>t,default:()=>k,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"docker-image-advance/instruksi-workdir","title":"Dockerfile WORKDIR","description":"\ud83e\udd14 Apa itu Instruksi Dockerfile WORKDIR","source":"@site/tutorial/docker/07-docker-image-advance/08-instruksi-workdir.md","sourceDirName":"07-docker-image-advance","slug":"/docker-image-advance/instruksi-workdir","permalink":"/docker/docker-image-advance/instruksi-workdir","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Dockerfile WORKDIR"},"sidebar":"tutorialSidebar","previous":{"title":"Dockerfile ADD","permalink":"/docker/docker-image-advance/instruksi-add"},"next":{"title":"Dockerfile ENTRYPOINT","permalink":"/docker/docker-image-advance/instruksi-entrypoint"}}');var r=n(74848),s=n(28453);const d={sidebar_position:8,title:"Dockerfile WORKDIR"},t=void 0,l={},c=[{value:"\ud83e\udd14 Apa itu Instruksi Dockerfile <code>WORKDIR</code>",id:"-apa-itu-instruksi-dockerfile-workdir",level:2},{value:"1\ufe0f\u20e3 Mengapa Menggunakan WORKDIR? (Bukan <code>RUN cd</code>)",id:"1\ufe0f\u20e3-mengapa-menggunakan-workdir-bukan-run-cd",level:2},{value:"2\ufe0f\u20e3 Karakteristik Utama",id:"2\ufe0f\u20e3-karakteristik-utama",level:2},{value:"A. Otomatis Membuat Folder",id:"a-otomatis-membuat-folder",level:3},{value:"B. Mendukung Path Relatif",id:"b-mendukung-path-relatif",level:3},{value:"C. Mendukung Variabel (<code>ENV</code>)",id:"c-mendukung-variabel-env",level:3},{value:"3\ufe0f\u20e3 Contoh Implementasi",id:"3\ufe0f\u20e3-contoh-implementasi",level:2},{value:"4\ufe0f\u20e3 Tips",id:"4\ufe0f\u20e3-tips",level:2}];function o(e){const a={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.h2,{id:"-apa-itu-instruksi-dockerfile-workdir",children:["\ud83e\udd14 Apa itu Instruksi Dockerfile ",(0,r.jsx)(a.code,{children:"WORKDIR"})]}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.code,{children:"WORKDIR"})," berfungsi untuk menetapkan ",(0,r.jsx)(a.strong,{children:"direktori kerja"})," (folder aktif) untuk instruksi selanjutnya seperti ",(0,r.jsx)(a.code,{children:"RUN"}),", ",(0,r.jsx)(a.code,{children:"CMD"}),", ",(0,r.jsx)(a.code,{children:"ENTRYPOINT"}),", ",(0,r.jsx)(a.code,{children:"COPY"})," dan ",(0,r.jsx)(a.code,{children:"ADD"})," di dalam Dockerfile."]}),"\n",(0,r.jsxs)(a.p,{children:["Jika ",(0,r.jsx)(a.code,{children:"WORKDIR"})," belum dibuat / tidak ditentukan, maka secara default Docker akan menggunakan direktori root (",(0,r.jsx)(a.code,{children:"/"}),"). Tetapi jika kita tidak membuat Dockerfile from ",(0,r.jsx)(a.code,{children:"scratch"}),", ",(0,r.jsx)(a.code,{children:"WORKDIR"})," mungkin berada sesuai base image yang dibuat. Maka untuk menghindari operasi yang tidak diinginkan, best practice-nya kita melakukan instruksi ",(0,r.jsx)(a.code,{children:"WORKDIR"}),"."]}),"\n",(0,r.jsxs)(a.h2,{id:"1\ufe0f\u20e3-mengapa-menggunakan-workdir-bukan-run-cd",children:["1\ufe0f\u20e3 Mengapa Menggunakan WORKDIR? (Bukan ",(0,r.jsx)(a.code,{children:"RUN cd"}),")"]}),"\n",(0,r.jsxs)(a.p,{children:["Jika kita mencoba berpindah folder menggunakan ",(0,r.jsx)(a.code,{children:"RUN cd /app"}),", maka cara itu ",(0,r.jsx)(a.strong,{children:"tidak akan berhasil"}),"."]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsxs)(a.strong,{children:["Masalah ",(0,r.jsx)(a.code,{children:"RUN cd"})]}),": Setiap instruksi ",(0,r.jsx)(a.code,{children:"RUN"})," berjalan di ",(0,r.jsx)(a.em,{children:"shell"})," dan ",(0,r.jsx)(a.em,{children:"layer"})," yang baru. Jika kita mengetik ",(0,r.jsx)(a.code,{children:"RUN cd /app"}),", folder tersebut hanya akan aktif selama baris itu berjalan. Baris berikutnya akan kembali ke folder root."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsxs)(a.strong,{children:["Solusi ",(0,r.jsx)(a.code,{children:"WORKDIR"})]}),": Instruksi ini menetapkan folder aktif secara permanen untuk semua baris instruksi di bawahnya dan juga saat kontainer dijalankan."]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"2\ufe0f\u20e3-karakteristik-utama",children:"2\ufe0f\u20e3 Karakteristik Utama"}),"\n",(0,r.jsx)(a.h3,{id:"a-otomatis-membuat-folder",children:"A. Otomatis Membuat Folder"}),"\n",(0,r.jsxs)(a.p,{children:["Jika direktori yang kita tentukan di ",(0,r.jsx)(a.code,{children:"WORKDIR"})," belum ada, Docker akan ",(0,r.jsx)(a.strong,{children:"otomatis"})," membuatnya untuk kita."]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-dockerfile",children:"# Folder /usr/src/app akan otomatis dibuat jika belum ada\nWORKDIR /usr/src/app\n"})}),"\n",(0,r.jsx)(a.h3,{id:"b-mendukung-path-relatif",children:"B. Mendukung Path Relatif"}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.code,{children:"WORKDIR"})," dapat dipanggil berkali-kali. Jika kita menggunakan path relatif, ia akan menyambung dari folder sebelumnya."]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-dockerfile",children:"WORKDIR /a\nWORKDIR b\nWORKDIR c\n# Lokasi saat ini adalah: /a/b/c\n"})}),"\n",(0,r.jsx)(a.admonition,{type:"tip",children:(0,r.jsxs)(a.p,{children:["Namun, demi kejelasan, sangat disarankan untuk selalu menggunakan ",(0,r.jsx)(a.strong,{children:"Absolute Path"})," (seperti ",(0,r.jsx)(a.code,{children:"/app/backend"}),")."]})}),"\n",(0,r.jsxs)(a.h3,{id:"c-mendukung-variabel-env",children:["C. Mendukung Variabel (",(0,r.jsx)(a.code,{children:"ENV"}),")"]}),"\n",(0,r.jsx)(a.p,{children:"Kita bisa menggunakan variabel lingkungan agar lokasi folder lebih fleksibel."}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-dockerfile",children:"ENV APP_HOME=/opt/myapp\nWORKDIR $APP_HOME\n"})}),"\n",(0,r.jsx)(a.h2,{id:"3\ufe0f\u20e3-contoh-implementasi",children:"3\ufe0f\u20e3 Contoh Implementasi"}),"\n",(0,r.jsxs)(a.p,{children:["Dalam project profesional, ",(0,r.jsx)(a.code,{children:"WORKDIR"})," digunakan untuk mengisolasi aplikasi dari file sistem OS dasar."]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-dockerfile",children:'FROM alpine:3.21.3\n\n# 1. Tentukan folder kerja\nWORKDIR /app\n\n# 2. Instruksi COPY akan menyalin file ke /app/\nCOPY . .\n\n# 3. Instruksi RUN akan dijalankan di dalam /app/\nRUN apk add --no-cache nodejs npm && npm install\n\n# 4. Saat kontainer jalan, aplikasi mulai dari folder /app/\nCMD ["npm", "start"]\n'})}),"\n",(0,r.jsx)(a.h2,{id:"4\ufe0f\u20e3-tips",children:"4\ufe0f\u20e3 Tips"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Gunakan Folder yang Bersih"}),": Hindari menggunakan folder sistem seperti ",(0,r.jsx)(a.code,{children:"/root"})," atau ",(0,r.jsx)(a.code,{children:"/tmp"}),". Gunakan folder seperti ",(0,r.jsx)(a.code,{children:"/app"})," atau ",(0,r.jsx)(a.code,{children:"/work"}),"."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Keamanan"}),": Saat menggunakan user non-root (seperti ",(0,r.jsx)(a.code,{children:"ucup"}),"), pastikan kita sudah mengatur kepemilikan folder ",(0,r.jsx)(a.code,{children:"WORKDIR"})," sebelum berpindah user."]}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-dockerfile",children:"WORKDIR /app\nRUN chown ucup:ucup /app\nUSER ucup\n"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Transparansi"}),": Dengan melihat ",(0,r.jsx)(a.code,{children:"WORKDIR"}),", orang lain yang membaca Dockerfile kita langsung tahu di mana lokasi jantung aplikasi Anda berada."]}),"\n"]})]})}function k(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>d,x:()=>t});var i=n(96540);const r={},s=i.createContext(r);function d(e){const a=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(s.Provider,{value:a},e.children)}}}]);