"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[42060],{28453(e,n,r){r.d(n,{R:()=>l,x:()=>d});var a=r(96540);const i={},s=a.createContext(i);function l(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(s.Provider,{value:n},e.children)}},75855(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"docker-swarm","title":"Docker Swarm","description":"\ud83d\udc0b Apa itu Docker Swarm?","source":"@site/tutorial/docker/16-docker-swarm.md","sourceDirName":".","slug":"/docker-swarm","permalink":"/docker/docker-swarm","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17,"title":"Docker Swarm"},"sidebar":"tutorialSidebar","previous":{"title":"Docker Cleanup","permalink":"/docker/docker-cleanup"},"next":{"title":"Docker Swarm Secret","permalink":"/docker/docker-swarm-secret"}}');var i=r(74848),s=r(28453);const l={sidebar_position:17,title:"Docker Swarm"},d=void 0,c={},t=[{value:"\ud83d\udc0b Apa itu Docker Swarm?",id:"-apa-itu-docker-swarm",level:2},{value:"\ud83c\udfd7 Konsep Dasar Arsitektur",id:"-konsep-dasar-arsitektur",level:2},{value:"1\ufe0f\u20e3 Node",id:"1\ufe0f\u20e3-node",level:3},{value:"2\ufe0f\u20e3 Service",id:"2\ufe0f\u20e3-service",level:3},{value:"3\ufe0f\u20e3 Task",id:"3\ufe0f\u20e3-task",level:3},{value:"4\ufe0f\u20e3 Overlay Network",id:"4\ufe0f\u20e3-overlay-network",level:3},{value:"\ud83d\udcca Ilustrasi Topologi Swarm",id:"-ilustrasi-topologi-swarm",level:2},{value:"\ud83d\udd01 Cara Kerja High Availability",id:"-cara-kerja-high-availability",level:2},{value:"\u2699\ufe0f Fitur Utama",id:"\ufe0f-fitur-utama",level:2},{value:"\ud83d\udce6 Perbandingan dengan Kubernetes",id:"-perbandingan-dengan-kubernetes",level:2},{value:"\ud83c\udfaf Kapan Menggunakan Docker Swarm?",id:"-kapan-menggunakan-docker-swarm",level:2},{value:"\ud83d\udd25 Contoh Implementasi",id:"-contoh-implementasi",level:2},{value:"\ud83c\udfaf Arsitektur Lab",id:"-arsitektur-lab",level:3},{value:"\ud83c\udfd7 Struktur Folder",id:"-struktur-folder",level:3},{value:"1\ufe0f\u20e3 Vagrantfile \u2013 Manager",id:"1\ufe0f\u20e3-vagrantfile--manager",level:3},{value:"2\ufe0f\u20e3 Vagrantfile \u2013 Worker 1",id:"2\ufe0f\u20e3-vagrantfile--worker-1",level:3},{value:"3\ufe0f\u20e3 Vagrantfile \u2013 Worker 2",id:"3\ufe0f\u20e3-vagrantfile--worker-2",level:3},{value:"\ud83d\ude80 Cara Menjalankan",id:"-cara-menjalankan",level:3},{value:"\ud83e\udde0 Inisialisasi Swarm",id:"-inisialisasi-swarm",level:2},{value:"1\ufe0f\u20e3 Masuk ke Manager",id:"1\ufe0f\u20e3-masuk-ke-manager",level:3},{value:"2\ufe0f\u20e3 Join Worker",id:"2\ufe0f\u20e3-join-worker",level:3},{value:"\ud83d\udd0d Verifikasi",id:"-verifikasi",level:3},{value:"\ud83d\udce6 Deploy Service",id:"-deploy-service",level:3},{value:"\ud83d\udd01 Uji Self-Healing",id:"-uji-self-healing",level:3},{value:"\ud83d\udcc8 Scale service yang sudah ada",id:"-scale-service-yang-sudah-ada",level:3}];function o(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"-apa-itu-docker-swarm",children:"\ud83d\udc0b Apa itu Docker Swarm?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Docker Swarm"})," adalah fitur ",(0,i.jsx)(n.em,{children:"orchestration"})," bawaan Docker yang digunakan untuk mengelola dan menjalankan container dalam cluster (sekumpulan server)."]}),"\n",(0,i.jsx)(n.p,{children:"Jika Docker biasa menjalankan container di 1 mesin, maka Docker Swarm memungkinkan:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Menjalankan container di ",(0,i.jsx)(n.strong,{children:"banyak mesin (node)"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"High availability."}),"\n",(0,i.jsx)(n.li,{children:"Load balancing."}),"\n",(0,i.jsx)(n.li,{children:"Scaling otomatis."}),"\n",(0,i.jsx)(n.li,{children:"Self-healing (container mati \u2192 otomatis dibuat ulang)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-konsep-dasar-arsitektur",children:"\ud83c\udfd7 Konsep Dasar Arsitektur"}),"\n",(0,i.jsx)(n.p,{children:"Dalam Docker Swarm ada beberapa komponen utama:"}),"\n",(0,i.jsx)(n.h3,{id:"1\ufe0f\u20e3-node",children:"1\ufe0f\u20e3 Node"}),"\n",(0,i.jsx)(n.p,{children:"Node adalah server yang tergabung dalam cluster."}),"\n",(0,i.jsx)(n.p,{children:"Ada 2 jenis node:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Manager Node"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mengelola cluster."}),"\n",(0,i.jsx)(n.li,{children:"Menyimpan state cluster."}),"\n",(0,i.jsx)(n.li,{children:"Mengatur scheduling container."}),"\n",(0,i.jsx)(n.li,{children:"Leader election (Raft consensus)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Worker Node"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hanya menjalankan container."}),"\n",(0,i.jsx)(n.li,{children:"Tidak mengatur cluster."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2\ufe0f\u20e3-service",children:"2\ufe0f\u20e3 Service"}),"\n",(0,i.jsx)(n.p,{children:"Service adalah definisi container yang ingin dijalankan di cluster."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service create --replicas 3 nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Artinya:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Jalankan 3 container nginx"}),"\n",(0,i.jsx)(n.li,{children:"Jika 1 mati \u2192 otomatis dibuat ulang"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3\ufe0f\u20e3-task",children:"3\ufe0f\u20e3 Task"}),"\n",(0,i.jsx)(n.p,{children:"Task adalah instance container yang dijalankan oleh service."}),"\n",(0,i.jsx)(n.h3,{id:"4\ufe0f\u20e3-overlay-network",children:"4\ufe0f\u20e3 Overlay Network"}),"\n",(0,i.jsx)(n.p,{children:"Docker Swarm menggunakan overlay network untuk komunikasi antar node. Container di node berbeda tetap bisa saling berkomunikasi seolah-olah satu LAN."}),"\n",(0,i.jsx)(n.h2,{id:"-ilustrasi-topologi-swarm",children:"\ud83d\udcca Ilustrasi Topologi Swarm"}),"\n",(0,i.jsx)(n.p,{children:"Ilustrasi kita memiliki 3 Node (Manager, Worker 1 dan Worker 2) dengan masing-masing IP Address yang berbeda:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\r\n                [ Manager Node ]\r\n                  192.168.33.10\r\n                       \u2502\r\n          \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n          \u2502                        \u2502\r\n    [ Worker 1 ]             [ Worker 2 ]\r\n    192.168.33.11            192.168.33.12\n"})}),"\n",(0,i.jsx)(n.p,{children:"Jika kita deploy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service create --replicas 4 nginx\n"})}),"\n",(0,i.jsx)(n.p,{children:"Maka 4 container akan tersebar otomatis ke worker node."}),"\n",(0,i.jsx)(n.h2,{id:"-cara-kerja-high-availability",children:"\ud83d\udd01 Cara Kerja High Availability"}),"\n",(0,i.jsx)(n.p,{children:"Misalnya:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Worker 1 mati"}),"\n",(0,i.jsx)(n.li,{children:"2 container hilang"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Manager akan:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mendeteksi kegagalan"}),"\n",(0,i.jsx)(n.li,{children:"Menjalankan ulang container di Worker 2"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Ini disebut ",(0,i.jsx)(n.strong,{children:"self-healing orchestration"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-fitur-utama",children:"\u2699\ufe0f Fitur Utama"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Built-in load balancing"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Rolling update"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Auto restart container"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Secret management"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Scaling service"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Encrypted cluster communication"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-perbandingan-dengan-kubernetes",children:"\ud83d\udce6 Perbandingan dengan Kubernetes"}),"\n",(0,i.jsx)(n.p,{children:"Perbandingan dengan \u2638\ufe0f Kubernetes:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Aspek"}),(0,i.jsx)(n.th,{children:"Docker Swarm"}),(0,i.jsx)(n.th,{children:"Kubernetes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Kompleksitas"})}),(0,i.jsx)(n.td,{children:"Mudah"}),(0,i.jsx)(n.td,{children:"Kompleks"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Setup"})}),(0,i.jsx)(n.td,{children:"Sangat cepat"}),(0,i.jsx)(n.td,{children:"Butuh konfigurasi banyak"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Learning curve"})}),(0,i.jsx)(n.td,{children:"Rendah"}),(0,i.jsx)(n.td,{children:"Tinggi"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Enterprise scale"})}),(0,i.jsx)(n.td,{children:"Terbatas"}),(0,i.jsx)(n.td,{children:"Sangat besar"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Popularitas"})}),(0,i.jsx)(n.td,{children:"Menurun"}),(0,i.jsx)(n.td,{children:"Sangat dominan"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-kapan-menggunakan-docker-swarm",children:"\ud83c\udfaf Kapan Menggunakan Docker Swarm?"}),"\n",(0,i.jsx)(n.p,{children:"Cocok jika:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ingin cluster sederhana"}),"\n",(0,i.jsx)(n.li,{children:"Tidak butuh kompleksitas Kubernetes"}),"\n",(0,i.jsx)(n.li,{children:"Infrastruktur kecil\u2013menengah"}),"\n",(0,i.jsx)(n.li,{children:"Untuk lab, riset, atau small production"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"-contoh-implementasi",children:"\ud83d\udd25 Contoh Implementasi"}),"\n",(0,i.jsx)(n.p,{children:"Contoh implementasi Docker Swarm menggunakan Vagrant (Bisa diganti dengan Virtual Manchine seperi VMWare, Virtualbox dll) dengan membuat cluster lab lokal (1 manager + 2 worker)."}),"\n",(0,i.jsx)(n.p,{children:"Contoh ini cocok untuk:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Lab DevOps"}),"\n",(0,i.jsx)(n.li,{children:"Simulasi distributed system"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-arsitektur-lab",children:"\ud83c\udfaf Arsitektur Lab"}),"\n",(0,i.jsx)(n.p,{children:"Kita akan membuat 3 VM:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"VM"}),(0,i.jsx)(n.th,{children:"Role"}),(0,i.jsx)(n.th,{children:"IP"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"node1"}),(0,i.jsx)(n.td,{children:"Manager"}),(0,i.jsx)(n.td,{children:"192.168.33.10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"node2"}),(0,i.jsx)(n.td,{children:"Worker"}),(0,i.jsx)(n.td,{children:"192.168.33.11"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"node3"}),(0,i.jsx)(n.td,{children:"Worker"}),(0,i.jsx)(n.td,{children:"192.168.33.12"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Semua VM berbasis:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Alpine Linux"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Virtualisasi menggunakan:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Vagrant"}),"\n",(0,i.jsx)(n.li,{children:"Provider: VirtualBox"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Cluster orchestration:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker Swarm"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-struktur-folder",children:"\ud83c\udfd7 Struktur Folder"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"swarm-cluster/\r\n\u2502\r\n\u251c\u2500\u2500 manager/\r\n\u2502   \u2514\u2500\u2500 Vagrantfile\r\n\u2502\r\n\u251c\u2500\u2500 worker1/\r\n\u2502   \u2514\u2500\u2500 Vagrantfile\r\n\u2502\r\n\u2514\u2500\u2500 worker2/\r\n    \u2514\u2500\u2500 Vagrantfile\n"})}),"\n",(0,i.jsx)(n.h3,{id:"1\ufe0f\u20e3-vagrantfile--manager",children:"1\ufe0f\u20e3 Vagrantfile \u2013 Manager"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udcc1 ",(0,i.jsx)(n.code,{children:"manager/Vagrantfile"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:'Vagrant.configure("2") do |config|\r\n  config.vm.box = "generic/alpine319"\r\n  config.vm.hostname = "manager"\r\n  config.vm.network "private_network", ip: "192.168.33.10"\r\n\r\n  config.vm.provider "virtualbox" do |vb|\r\n    vb.memory = 1024\r\n    vb.cpus = 1\r\n  end\r\n\r\n  config.vm.provision "shell", inline: <<-SHELL\r\n    apk update\r\n    apk add docker\r\n    rc-update add docker boot\r\n    service docker start\r\n    adduser vagrant docker\r\n  SHELL\r\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2\ufe0f\u20e3-vagrantfile--worker-1",children:"2\ufe0f\u20e3 Vagrantfile \u2013 Worker 1"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udcc1 ",(0,i.jsx)(n.code,{children:"worker1/Vagrantfile"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:'Vagrant.configure("2") do |config|\r\n  config.vm.box = "generic/alpine319"\r\n  config.vm.hostname = "worker1"\r\n  config.vm.network "private_network", ip: "192.168.33.11"\r\n\r\n  config.vm.provider "virtualbox" do |vb|\r\n    vb.memory = 1024\r\n    vb.cpus = 1\r\n  end\r\n\r\n  config.vm.provision "shell", inline: <<-SHELL\r\n    apk update\r\n    apk add docker\r\n    rc-update add docker boot\r\n    service docker start\r\n    adduser vagrant docker\r\n  SHELL\r\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3\ufe0f\u20e3-vagrantfile--worker-2",children:"3\ufe0f\u20e3 Vagrantfile \u2013 Worker 2"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udcc1 ",(0,i.jsx)(n.code,{children:"worker2/Vagrantfile"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ruby",children:'Vagrant.configure("2") do |config|\r\n  config.vm.box = "generic/alpine319"\r\n  config.vm.hostname = "worker2"\r\n  config.vm.network "private_network", ip: "192.168.33.12"\r\n\r\n  config.vm.provider "virtualbox" do |vb|\r\n    vb.memory = 1024\r\n    vb.cpus = 1\r\n  end\r\n\r\n  config.vm.provision "shell", inline: <<-SHELL\r\n    apk update\r\n    apk add docker\r\n    rc-update add docker boot\r\n    service docker start\r\n    adduser vagrant docker\r\n  SHELL\r\nend\n'})}),"\n",(0,i.jsx)(n.h3,{id:"-cara-menjalankan",children:"\ud83d\ude80 Cara Menjalankan"}),"\n",(0,i.jsx)(n.p,{children:"Jalankan masing-masing secara terpisah:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd manager\r\nvagrant up\r\n\r\ncd ../worker1\r\nvagrant up\r\n\r\ncd ../worker2\r\nvagrant up\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-inisialisasi-swarm",children:"\ud83e\udde0 Inisialisasi Swarm"}),"\n",(0,i.jsx)(n.h3,{id:"1\ufe0f\u20e3-masuk-ke-manager",children:"1\ufe0f\u20e3 Masuk ke Manager"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd manager\r\nvagrant ssh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Inisialisasi swarm:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker swarm init --advertise-addr 192.168.33.10\n"})}),"\n",(0,i.jsx)(n.p,{children:"Token akan keluar, copy token worker."}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"Terkadang ada kasus dimana di beberapa environment Alpine Linux + VirtualBox, tidak otomatis diarahkan ke IPv4, sehingga manager MENOLAK koneksi TCP IPv4. Untuk mengatasi hal tersebut jalankan perintah dibawah ini untuk mengarahkan ke IPv4:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker swarm init \\\r\n  --advertise-addr 192.168.56.10 \\\r\n  --listen-addr 0.0.0.0:2377\n"})}),(0,i.jsxs)(n.p,{children:["Value ",(0,i.jsx)(n.code,{children:"--listen-addr 0.0.0.0:2377"})," dapat di ubah dengan IP langsung ",(0,i.jsx)(n.code,{children:"--listen-addr 192.168.56.10:2377"}),"."]})]}),"\n",(0,i.jsx)(n.h3,{id:"2\ufe0f\u20e3-join-worker",children:"2\ufe0f\u20e3 Join Worker"}),"\n",(0,i.jsx)(n.p,{children:"Masuk ke worker1:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd worker1\r\nvagrant ssh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Lalu:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker swarm join --token <TOKEN> 192.168.33.10:2377\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ulangi di worker2."}),"\n",(0,i.jsx)(n.h3,{id:"-verifikasi",children:"\ud83d\udd0d Verifikasi"}),"\n",(0,i.jsx)(n.p,{children:"Di manager:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker node ls\n"})}),"\n",(0,i.jsx)(n.p,{children:"Harus muncul:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"manager \u2192 Leader"}),"\n",(0,i.jsx)(n.li,{children:"worker1 \u2192 Ready"}),"\n",(0,i.jsx)(n.li,{children:"worker2 \u2192 Ready"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-deploy-service",children:"\ud83d\udce6 Deploy Service"}),"\n",(0,i.jsx)(n.p,{children:"Di manager:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service create \\\r\n  --name web \\\r\n  --replicas 3 \\\r\n  -p 8080:80 \\\r\n  nginx:alpine\n"})}),"\n",(0,i.jsx)(n.p,{children:"Cek distribusi:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service ps web\n"})}),"\n",(0,i.jsx)(n.p,{children:"Cek node:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker node ls\n"})}),"\n",(0,i.jsx)(n.h3,{id:"-uji-self-healing",children:"\ud83d\udd01 Uji Self-Healing"}),"\n",(0,i.jsx)(n.p,{children:"Matikan docker di worker:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"service docker stop\n"})}),"\n",(0,i.jsx)(n.p,{children:"Cek di manager:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service ps web\n"})}),"\n",(0,i.jsx)(n.p,{children:"Swarm akan memindahkan container otomatis."}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"Untuk melihat token yang ada manager jalankan perintah di bawah ini:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker swarm join-token manager\n"})})]}),"\n",(0,i.jsx)(n.p,{children:"Jika service docker di jalankan lagi pada worker jangan lupa cek di manager statusnya:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker node ls\n"})}),"\n",(0,i.jsx)(n.h3,{id:"-scale-service-yang-sudah-ada",children:"\ud83d\udcc8 Scale service yang sudah ada"}),"\n",(0,i.jsx)(n.p,{children:"Cek service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service ls\r\ndocker service ps web\n"})}),"\n",(0,i.jsx)(n.p,{children:"Scale service menjadi 3:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service scale web=3\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);