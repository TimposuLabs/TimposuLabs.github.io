"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[5493],{64707:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"express/route-path","title":"Route Path","description":"Pada materi Basic Routing, kita belajar bagaimana cara melakukan routing dengan HTTP Method sesuai yang kita mau. Sebelumnya, route path yang kita gunakan tidak dinamis. ExpressJS mendukung route path yang dinamis, dengan cara menggunakan route path string patterns atau regex.","source":"@site/tutorial/nodejs/express/10-route-path.md","sourceDirName":"express","slug":"/express/route-path","permalink":"/nodejs/express/route-path","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Route Path"},"sidebar":"tutorialSidebar","previous":{"title":"Middleware","permalink":"/nodejs/express/middleware"},"next":{"title":"Route Parameter","permalink":"/nodejs/express/route-parameter"}}');var t=a(74848),r=a(28453);const i={sidebar_position:10,title:"Route Path"},o=void 0,p={},u=[{value:"\u2195\ufe0f Path to Regexp",id:"arrow_up_down-path-to-regexp",level:2},{value:"\u2705 Update untuk Express v5 + Path-to-Regexp v8",id:"-update-untuk-express-v5--path-to-regexp-v8",level:2},{value:"\u2714 1. Gunakan REGEX FULL ROUTE (cara paling aman / rekomendasi)",id:"-1-gunakan-regex-full-route-cara-paling-aman--rekomendasi",level:3},{value:"\u2714 2. Gunakan Middleware untuk filter angka",id:"-2-gunakan-middleware-untuk-filter-angka",level:3},{value:"\u2714 3. Gunakan Route Parameter Validator (Express v5)",id:"-3-gunakan-route-parameter-validator-express-v5",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Pada materi ",(0,t.jsx)(n.a,{href:"/nodejs/express/routing",children:"Basic Routing"}),", kita belajar bagaimana cara melakukan routing dengan HTTP Method sesuai yang kita mau. Sebelumnya, route path yang kita gunakan tidak dinamis. ExpressJS mendukung route path yang dinamis, dengan cara menggunakan route path ",(0,t.jsx)(n.code,{children:"string patterns"})," atau ",(0,t.jsx)(n.code,{children:"regex"}),"."]}),"\n",(0,t.jsxs)(n.h2,{id:"arrow_up_down-path-to-regexp",children:["\u2195\ufe0f"," Path to Regexp"]}),"\n",(0,t.jsxs)(n.p,{children:["Express.js menggunakan library ",(0,t.jsx)(n.em,{children:"Path to Regexp"})," untuk melakukan routing berupa ",(0,t.jsx)(n.strong,{children:"regex"}),". Kita bisa lihat detail cara melakukan regex nya pada halaman dokumentasi library nya."]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/path-to-regexp",children:"https://www.npmjs.com/package/path-to-regexp"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/pillarjs/path-to-regexp",children:"https://github.com/pillarjs/path-to-regexp"})}),"\n"]})}),"\n",(0,t.jsx)(n.p,{children:"Contoh penggunaan:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const request = require('supertest');\nconst express = require('express');\n\nconst app = express();\n\napp.get('/student/:name.json', (req, res) => {\n    res.send(req.originalUrl);\n});\n\n// Using regex to match /class/*(number).json\n// pattern untuk path-to-regexp v8 harus menggunakan regex secara full match\napp.get(/^\\/class\\/(\\d+)\\.json$/, (req, res) => {\n    res.send(req.originalUrl);\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Full code dengan unit test:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const request = require('supertest');\nconst express = require('express');\n\nconst app = express();\n\napp.get('/student/:name.json', (req, res) => {\n    res.send(req.originalUrl);\n});\n\n// Using regex to match /class/*(number).json\n// pattern untuk path-to-regexp v8 harus menggunakan regex secara full match\napp.get(/^\\/class\\/(\\d+)\\.json$/, (req, res) => {\n    res.send(req.originalUrl);\n});\n\ntest('Test Response Route Path /student/:name.json endpoint', async () => {\n    const response = await request(app).get('/student/budi.json');\n    expect(response.status).toBe(200);\n    expect(response.text).toBe('/student/budi.json');\n});\n\ntest('Test Response Route Path /student/:name.json endpoint', async () => {\n    const response = await request(app).get('/student/aco.json');\n    expect(response.status).toBe(200);\n    expect(response.text).toBe('/student/aco.json');\n});\n\ntest('Test Response Route Path /class/*(number).json endpoint', async () => {\n    const response = await request(app).get('/class/111.json');\n    expect(response.status).toBe(200);\n    expect(response.text).toBe('/class/111.json');\n});\n\ntest('Test Response Route Path /class/*(number).json endpoint', async () => {\n    const response = await request(app).get('/class/tiga.json'); // route path bukan angka, harusnya 404\n    expect(response.status).toBe(404);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-update-untuk-express-v5--path-to-regexp-v8",children:"\u2705 Update untuk Express v5 + Path-to-Regexp v8"}),"\n",(0,t.jsx)(n.p,{children:"Di Path-to-Regexp v8, tidak boleh lagi membuat regex setelah nama parameter. Sekarang ada 3 cara yang valid:"}),"\n",(0,t.jsx)(n.h3,{id:"-1-gunakan-regex-full-route-cara-paling-aman--rekomendasi",children:"\u2714 1. Gunakan REGEX FULL ROUTE (cara paling aman / rekomendasi)"}),"\n",(0,t.jsx)(n.p,{children:"Dengan route berbasis regex penuh:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"app.get(/^\\/class\\/(\\d+)\\.json$/, (req, res) => {\n  res.send(req.originalUrl);\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Dan ambil param-nya:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const number = req.params[0]; // karena regex group pertama\n"})}),"\n",(0,t.jsx)(n.p,{children:"Test endpoint \u2192"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"/class/111.json \u2714 sukses\n/class/abc.json \u2718 tidak match\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-2-gunakan-middleware-untuk-filter-angka",children:"\u2714 2. Gunakan Middleware untuk filter angka"}),"\n",(0,t.jsxs)(n.p,{children:["Karena Express v5 + v8 TIDAK support ",(0,t.jsx)(n.em,{children:"parameter-regex inline"}),", Anda bisa lakukan:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"app.get('/class/:number.json', (req, res, next) => {\n  if (!/^\\d+$/.test(req.params.number)) {\n    return res.status(400).send(\"Invalid number\");\n  }\n  res.send(req.originalUrl);\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Test endpoint \u2192"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"/class/123.json \u2714\n/class/abc.json \u2192 400\n"})}),"\n",(0,t.jsx)(n.h3,{id:"-3-gunakan-route-parameter-validator-express-v5",children:"\u2714 3. Gunakan Route Parameter Validator (Express v5)"}),"\n",(0,t.jsxs)(n.p,{children:["Express v5 mendukung ",(0,t.jsx)(n.code,{children:".param()"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'app.param("number", (req, res, next, value) => {\n  if (!/^\\d+$/.test(value)) return res.status(400).send("Invalid number");\n  next();\n});\n\napp.get(\'/class/:number.json\', (req, res) => {\n  res.send(req.originalUrl);\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u274c Format yang TIDAK bisa digunakan di Path-to-Regexp v8"}),"\n",(0,t.jsx)(n.p,{children:"Semua ini akan error:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"'/class/:number(\\d+).json'\n'/class/:number<\\d+>.json'\n'/class/:number(\\\\d+).json'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Karena v8 sudah TIDAK mendukung regex inline setelah parameter."})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var s=a(96540);const t={},r=s.createContext(t);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);