"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[74685],{69677:(n,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"springboot/springboot-mvc/custom-validation","title":"Custom Validation","description":"Dalam Spring Boot MVC kita dapat membuat Custom Validation yaitu membuat aturan validasi sendiri jika anotasi standar (seperti @NotNull atau @Min) tidak cukup untuk memenuhi logika bisnis yang kompleks.","source":"@site/tutorial/spring/springboot/springboot-mvc/18-custom-validation.md","sourceDirName":"springboot/springboot-mvc","slug":"/springboot/springboot-mvc/custom-validation","permalink":"/spring/springboot/springboot-mvc/custom-validation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"title":"Custom Validation"},"sidebar":"tutorialSidebar","previous":{"title":"Custom Error Names","permalink":"/spring/springboot/springboot-mvc/custom-error-names"},"next":{"title":"Spring Boot MVC CRUD","permalink":"/spring/springboot/springboot-mvc-crud/"}}');var e=t(74848),o=t(28453);const s={sidebar_position:20,title:"Custom Validation"},r=void 0,l={},d=[{value:"1\ufe0f\u20e3 Membuat Custom Annotation",id:"1\ufe0f\u20e3-membuat-custom-annotation",level:3},{value:"2\ufe0f\u20e3 Membuat Class Validator",id:"2\ufe0f\u20e3-membuat-class-validator",level:3},{value:"3\ufe0f\u20e3 Menggunakan Anotasi di Model",id:"3\ufe0f\u20e3-menggunakan-anotasi-di-model",level:3},{value:"4\ufe0f\u20e3 Controller",id:"4\ufe0f\u20e3-controller",level:3}];function u(n){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.p,{children:["Dalam Spring Boot MVC kita dapat membuat Custom Validation yaitu membuat aturan validasi sendiri jika anotasi standar (seperti ",(0,e.jsx)(a.code,{children:"@NotNull"})," atau ",(0,e.jsx)(a.code,{children:"@Min"}),") tidak cukup untuk memenuhi logika bisnis yang kompleks."]}),"\n",(0,e.jsxs)(a.p,{children:["Misalnya kita ingin membuat validation ",(0,e.jsx)(a.code,{children:"@DiscountCode"})," yang harus memiliki kode awalan sesuai keinginan kita misalnya default ",(0,e.jsx)(a.code,{children:"PROMO"}),":"]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode // default PROMO\n@NotNull(message = "Is Required")\nprivate String discountCode;\n'})}),"\n",(0,e.jsxs)(a.p,{children:["Tapi nantinya value dari ",(0,e.jsx)(a.code,{children:"@DiscountCode"})," dapat diubah misalnya ",(0,e.jsx)(a.code,{children:'@DiscountCode(value = "NEWYEAR", message = "Must start with NEWYEAR")'}),"."]}),"\n",(0,e.jsx)(a.p,{children:"Berikut langkahnya:"}),"\n",(0,e.jsx)(a.h3,{id:"1\ufe0f\u20e3-membuat-custom-annotation",children:"1\ufe0f\u20e3 Membuat Custom Annotation"}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport jakarta.validation.Constraint;\nimport jakarta.validation.Payload;\n\n@Constraint(validatedBy = DiscountCodeConstraintValidator.class) // Menghubungkan ke class logic\n@Target({ElementType.FIELD, ElementType.METHOD}) // Bisa dipakai di field atau method\n@Retention(RetentionPolicy.RUNTIME) // Tetap ada saat aplikasi berjalan\npublic @interface DiscountCode {\n\n\t// default discount code dengan value \'PROMO` jika tidak didefinisikan\n\tpublic String value() default "PROMO";\n\t\n\t// dafault error message\n\tpublic String message() default "must start with PROMO";\n\t\n\t// default group dari Bean Validation (wajib ada)\n\tpublic Class<?>[] groups() default {};\n\t\n\t// default payloads dari Bean Validation (wajib ada)\n\tpublic Class<? extends Payload>[] payload() default {};\n}\n'})}),"\n",(0,e.jsx)(a.h3,{id:"2\ufe0f\u20e3-membuat-class-validator",children:"2\ufe0f\u20e3 Membuat Class Validator"}),"\n",(0,e.jsxs)(a.p,{children:["Class ini berisi logika untuk mengecek apakah data yang diinput pengguna valid atau tidak. Kelas ini harus mengimplementasikan ",(0,e.jsx)(a.code,{children:"ConstraintValidator"}),"."]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:"import jakarta.validation.ConstraintValidator;\nimport jakarta.validation.ConstraintValidatorContext;\n\npublic class DiscountCodeConstraintValidator implements ConstraintValidator<DiscountCode, String> {\n\n\tprivate String prefix;\n\t\n\t@Override\n\tpublic void initialize(DiscountCode discountCode) {\n\t\tprefix = discountCode.value();\n\t}\n\t\n\t@Override\n\tpublic boolean isValid(String value, ConstraintValidatorContext context) {\n\t\t\n\t\tboolean result; \n\t\t\n\t\tif (value != null) {\n\t\t\tresult = value.startsWith(prefix); // mencocokan prefix awalan value discount code\n\t\t} else {\n\t\t\tresult = true;\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n}\n"})}),"\n",(0,e.jsx)(a.h3,{id:"3\ufe0f\u20e3-menggunakan-anotasi-di-model",children:"3\ufe0f\u20e3 Menggunakan Anotasi di Model"}),"\n",(0,e.jsx)(a.p,{children:"Setelah dibuat, kita bisa menggunakannya semudah menggunakan anotasi yang lain."}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode\n@NotNull(message = "Is Required")\nprivate String discountCode;\n'})}),"\n",(0,e.jsx)(a.h3,{id:"4\ufe0f\u20e3-controller",children:"4\ufe0f\u20e3 Controller"}),"\n",(0,e.jsxs)(a.p,{children:["Sama seperti validasi standar, Anda hanya perlu menambahkan ",(0,e.jsx)(a.code,{children:"@Valid"})," di Controller."]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@PostMapping("/process")\npublic String processForm(\n        @Valid @ModelAttribute("person") Person person,\n        BindingResult bindingResult) {\n    \n    if (bindingResult.hasErrors()) {\n        return "person-form";\n    } else {\n        return "person-confirm";\n    }\n}\n'})}),"\n",(0,e.jsx)(a.p,{children:(0,e.jsx)(a.img,{alt:"Spring Boot MVC",src:t(5311).A+"",width:"903",height:"578"})}),"\n",(0,e.jsxs)(a.p,{children:["Untuk mengubah default value dari ",(0,e.jsx)(a.code,{children:"@DiscountCode"}),", bisa dilakukan dengan cara biasa seperti validation lainnya, misalnya mengganti code ",(0,e.jsx)(a.code,{children:"PROMO"})," dengan ",(0,e.jsx)(a.code,{children:"NEWYEAR"}),":"]}),"\n",(0,e.jsx)(a.pre,{children:(0,e.jsx)(a.code,{className:"language-java",children:'@DiscountCode(value = "NEWYEAR", message = "Must start with NEWYEAR")\n@NotNull(message = "Is Required")\nprivate String discountCode;\n'})}),"\n",(0,e.jsx)(a.admonition,{type:"info",children:(0,e.jsxs)(a.p,{children:["Source Code: ",(0,e.jsx)(a.a,{href:"https://github.com/TimposuLabs/belajar-springboot-mvc/tree/main/17-belajar-spring-mvc-custom-validation",children:"https://github.com/TimposuLabs/belajar-springboot-mvc/tree/main/17-belajar-spring-mvc-custom-validation"})]})})]})}function c(n={}){const{wrapper:a}={...(0,o.R)(),...n.components};return a?(0,e.jsx)(a,{...n,children:(0,e.jsx)(u,{...n})}):u(n)}},5311:(n,a,t)=>{t.d(a,{A:()=>i});const i=t.p+"assets/images/springboot-mvc26-46d3119e39cbb4458e24a6774de192f6.png"},28453:(n,a,t)=>{t.d(a,{R:()=>s,x:()=>r});var i=t(96540);const e={},o=i.createContext(e);function s(n){const a=i.useContext(o);return i.useMemo((function(){return"function"==typeof n?n(a):{...a,...n}}),[a,n])}function r(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(e):n.components||e:s(n.components),i.createElement(o.Provider,{value:a},n.children)}}}]);