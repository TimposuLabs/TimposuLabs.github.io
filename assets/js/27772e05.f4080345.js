"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[62370],{28453(n,e,a){a.d(e,{R:()=>t,x:()=>d});var i=a(96540);const r={},s=i.createContext(r);function t(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),i.createElement(s.Provider,{value:e},n.children)}},62546(n,e,a){a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>k,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"docker-image-advance/instruksi-expose","title":"Dockerfile EXPOSE","description":"\ud83e\udd14 Apa itu EXPOSE?","source":"@site/tutorial/docker/07-docker-image-advance/11-instruksi-expose.md","sourceDirName":"07-docker-image-advance","slug":"/docker-image-advance/instruksi-expose","permalink":"/docker/docker-image-advance/instruksi-expose","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"Dockerfile EXPOSE"},"sidebar":"tutorialSidebar","previous":{"title":"Dockerfile USER","permalink":"/docker/docker-image-advance/instruksi-user"},"next":{"title":"Multi-Stage Build","permalink":"/docker/docker-image-advance/multistage-build"}}');var r=a(74848),s=a(28453);const t={sidebar_position:11,title:"Dockerfile EXPOSE"},d=void 0,l={},o=[{value:"\ud83e\udd14 Apa itu <code>EXPOSE</code>?",id:"-apa-itu-expose",level:2},{value:"1\ufe0f\u20e3 Sintaks Dasar",id:"1\ufe0f\u20e3-sintaks-dasar",level:2},{value:"2\ufe0f\u20e3 Poin Penting",id:"2\ufe0f\u20e3-poin-penting",level:2},{value:"3\ufe0f\u20e3 Penggunaan di Dunia Nyata",id:"3\ufe0f\u20e3-penggunaan-di-dunia-nyata",level:2},{value:"4\ufe0f\u20e3 Contoh Penggunaan",id:"4\ufe0f\u20e3-contoh-penggunaan",level:2},{value:"5\ufe0f\u20e3 Best Practice",id:"5\ufe0f\u20e3-best-practice",level:2}];function c(n){const e={code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h2,{id:"-apa-itu-expose",children:["\ud83e\udd14 Apa itu ",(0,r.jsx)(e.code,{children:"EXPOSE"}),"?"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"EXPOSE"})," adalah instruksi dalam Dockerfile yang berfungsi untuk menginformasikan kepada Docker dan pengguna (engineer lain) bahwa kontainer akan mendengarkan (",(0,r.jsx)(e.em,{children:"listen"}),") pada port jaringan tertentu saat dijalankan."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Fungsi Utama"}),": Sebagai dokumentasi teknis antara orang yang membangun image dan orang yang menjalankan kontainer."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Protokol"}),": Secara default menggunakan ",(0,r.jsx)(e.strong,{children:"TCP"}),", namun Anda juga bisa menentukan ",(0,r.jsx)(e.strong,{children:"UDP"}),"."]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"1\ufe0f\u20e3-sintaks-dasar",children:"1\ufe0f\u20e3 Sintaks Dasar"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dockerfile",children:"# Mendokumentasikan port tunggal (TCP)\r\nEXPOSE 8080\r\n\r\n# Mendokumentasikan port dengan protokol spesifik\r\nEXPOSE 53/udp\r\n\r\n# Mendokumentasikan banyak port sekaligus\r\nEXPOSE 80 443 3306\n"})}),"\n",(0,r.jsx)(e.h2,{id:"2\ufe0f\u20e3-poin-penting",children:"2\ufe0f\u20e3 Poin Penting"}),"\n",(0,r.jsxs)(e.p,{children:["Banyak yang mengira ",(0,r.jsx)(e.code,{children:"EXPOSE"})," otomatis membuka akses dari browser internet ke kontainer. Ini adalah pemahaman yang keliru."]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Fitur"}),(0,r.jsx)(e.th,{children:"EXPOSE"}),(0,r.jsx)(e.th,{children:"Flag -p (Publish)"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Kapan ditulis?"})}),(0,r.jsx)(e.td,{children:"Di dalam Dockerfile."}),(0,r.jsx)(e.td,{children:"Saat menjalankan docker run."})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Akses Publik?"})}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.strong,{children:"TIDAK"}),". Port tidak terbuka ke host/internet."]}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.strong,{children:"YA"}),". Menghubungkan port laptop ke kontainer."]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"Fungsi"})}),(0,r.jsx)(e.td,{children:"Dokumentasi & Komunikasi antar kontainer."}),(0,r.jsx)(e.td,{children:"Akses aplikasi dari luar (browser)."})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Contoh"}),": Jika kita menulis ",(0,r.jsx)(e.code,{children:"EXPOSE 8080"})," di Dockerfile, kita tetap wajib mengetik ",(0,r.jsx)(e.code,{children:"docker run -p 8080:8080"})," agar bisa mengakses aplikasi dari ",(0,r.jsx)(e.code,{children:"localhost:8080"}),"."]}),"\n",(0,r.jsx)(e.h2,{id:"3\ufe0f\u20e3-penggunaan-di-dunia-nyata",children:"3\ufe0f\u20e3 Penggunaan di Dunia Nyata"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Otomatisasi Jaringan"}),": Jika kita menggunakan ",(0,r.jsx)(e.em,{children:"User-defined Bridge Network"})," (Docker Network), kontainer lain di jaringan yang sama dapat melihat port yang di-",(0,r.jsx)(e.code,{children:"EXPOSE"})," untuk saling berkomunikasi secara internal tanpa perlu flag ",(0,r.jsx)(e.code,{children:"-p"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsxs)(e.strong,{children:["Otomatisasi ",(0,r.jsx)(e.code,{children:"-P"})," (Capital P)"]}),": Kita bisa menjalankan kontainer dengan flag ",(0,r.jsx)(e.code,{children:"-P"})," besar. Docker akan secara otomatis memetakan semua port yang terdaftar di ",(0,r.jsx)(e.code,{children:"EXPOSE"})," ke port acak yang tersedia di komputer host kita."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.em,{children:["Perintah: ",(0,r.jsx)(e.code,{children:"docker run -d -P nginx"})]})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Dokumentasi Tim"}),": Misal saat rekan tim melakukan ",(0,r.jsx)(e.code,{children:"docker image inspect"}),", mereka langsung tahu port mana yang harus dipetakan tanpa perlu membaca kode sumber aplikasi kita."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"4\ufe0f\u20e3-contoh-penggunaan",children:"4\ufe0f\u20e3 Contoh Penggunaan"}),"\n",(0,r.jsxs)(e.p,{children:["Berikut adalah contoh lengkap Dockerfile untuk aplikasi Spring Boot, dengan instruksi ",(0,r.jsx)(e.code,{children:"EXPOSE"}),"."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Dockerfile"}),":"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dockerfile",children:'# Menggunakan JRE Java 21 yang ringan (Runtime saja)\r\nFROM eclipse-temurin:21-jre-alpine\r\n\r\n# Menentukan folder tempat aplikasi akan diletakkan\r\nWORKDIR /app\r\n\r\n# 1. INSTRUKSI EXPOSE (Dokumentasi Port)\r\n# Memberitahu bahwa aplikasi ini berjalan di port 8080\r\nEXPOSE 8080\r\n\r\n# 2. COPY (Menyalin file JAR dari laptop ke dalam image)\r\n# Pastikan path \'target/app.jar\' sesuai dengan hasil build Anda\r\nCOPY target/app.jar app.jar\r\n\r\n# 3. CMD (Perintah untuk menjalankan aplikasi)\r\nCMD ["java", "-jar", "app.jar"]\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Build Image"}),":"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker build -t spring-app-simple .\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Run Kontainer"}),":"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["Meskipun di Dockerfile tertulis ",(0,r.jsx)(e.code,{children:"EXPOSE 8080"}),", kita tetap harus menggunakan flag ",(0,r.jsx)(e.code,{children:"-p"})," agar bisa dibuka di browser."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker run -d -p 8080:8080 --name running-app spring-app-simple\n"})}),"\n",(0,r.jsx)(e.h2,{id:"5\ufe0f\u20e3-best-practice",children:"5\ufe0f\u20e3 Best Practice"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Selalu Sertakan"}),": Meskipun opsional, selalu tulis ",(0,r.jsx)(e.code,{children:"EXPOSE"})," untuk membantu orang lain (dan sistem seperti Kubernetes/Cloud) memahami cara berkomunikasi dengan aplikasi kita."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Gunakan Port Standar"}),": Jika aplikasi kita adalah web server, gunakan ",(0,r.jsx)(e.code,{children:"EXPOSE 80"})," atau ",(0,r.jsx)(e.code,{children:"8080"}),". Jika database, gunakan ",(0,r.jsx)(e.code,{children:"3306"})," (MySQL) atau ",(0,r.jsx)(e.code,{children:"5432"})," (Postgres)."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Sinkronisasi dengan Aplikasi"}),": Pastikan angka port di ",(0,r.jsx)(e.code,{children:"EXPOSE"})," sama dengan angka port yang didefinisikan di dalam aplikasi kita (misal di Spring Boot ",(0,r.jsx)(e.code,{children:"server.port=8080"}),")."]}),"\n"]})]})}function k(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}}}]);