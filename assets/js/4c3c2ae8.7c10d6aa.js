"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[3254],{9270(a,e,n){n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/cascading","title":"Cascading","description":"Pada materi sebelumnya dalam relasi One-to-One, kita menggunakan cascade = CascadeType.ALL, dimana jika kita melakukan operasi (Create, Update, Delete) pada objek ini, maka objek yang terhubung akan otomatis menerima operasi yang sama. Di materi kali ini kita akan membahas Cascading dalam Hibernate lebih detail.","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/12-cascading.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/cascading","permalink":"/spring/springboot/springboot-jpa-hibernate/cascading","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"Cascading"},"sidebar":"tutorialSidebar","previous":{"title":"One-to-One Bi-Directional","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-one-bi-directional"},"next":{"title":"One-to-One Cascade","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-one-cascade"}}');var s=n(74848),r=n(28453);const d={sidebar_position:12,title:"Cascading"},t=void 0,c={},l=[{value:"1\ufe0f\u20e3 Apa itu Cascading?",id:"1\ufe0f\u20e3-apa-itu-cascading",level:2},{value:"2\ufe0f\u20e3 Jenis-Jenis CascadeType",id:"2\ufe0f\u20e3-jenis-jenis-cascadetype",level:2},{value:"3\ufe0f\u20e3 Contoh Implementasi Kode",id:"3\ufe0f\u20e3-contoh-implementasi-kode",level:2},{value:"A. Menggunakan Cascade <code>ALL</code> (Agresif)",id:"a-menggunakan-cascade-all-agresif",level:3},{value:"B. Menggunakan Cascade Terpilih (Spesifik)",id:"b-menggunakan-cascade-terpilih-spesifik",level:3},{value:"4\ufe0f\u20e3 Kapan Harus Menggunakan Cascading?",id:"4\ufe0f\u20e3-kapan-harus-menggunakan-cascading",level:2},{value:"5\ufe0f\u20e3 BONUS: Perbedaan Penting: <code>CascadeType.REMOVE</code> vs <code>orphanRemoval = true</code>",id:"5\ufe0f\u20e3-bonus-perbedaan-penting-cascadetyperemove-vs-orphanremoval--true",level:2}];function o(a){const e={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...a.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["Pada materi sebelumnya dalam relasi ",(0,s.jsx)(e.strong,{children:"One-to-One"}),", kita menggunakan ",(0,s.jsx)(e.code,{children:"cascade = CascadeType.ALL"}),", dimana jika kita melakukan operasi (Create, Update, Delete) pada objek ini, maka objek yang terhubung akan otomatis menerima operasi yang sama. Di materi kali ini kita akan membahas Cascading dalam Hibernate lebih detail."]}),"\n",(0,s.jsx)(e.h2,{id:"1\ufe0f\u20e3-apa-itu-cascading",children:"1\ufe0f\u20e3 Apa itu Cascading?"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Cascading"}),' adalah fitur yang memungkinkan sebuah operasi pada satu entitas (Parent) secara otomatis "mengalir" atau diteruskan ke entitas lain yang terhubung dengannya (Child).\r\nTanpa cascading, kita harus menyimpan atau menghapus setiap objek satu per satu secara manual. Dengan cascading, kita cukup memanipulasi objek utama, dan Hibernate akan mengurus sisanya.']}),"\n",(0,s.jsx)(e.h2,{id:"2\ufe0f\u20e3-jenis-jenis-cascadetype",children:"2\ufe0f\u20e3 Jenis-Jenis CascadeType"}),"\n",(0,s.jsxs)(e.p,{children:["JPA menyediakan beberapa opsi di dalam enum ",(0,s.jsx)(e.code,{children:"jakarta.persistence.CascadeType"}),":"]}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Jenis Cascade"}),(0,s.jsx)(e.th,{children:"Penjelasan"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"PERSIST"})}),(0,s.jsxs)(e.td,{children:["Jika Parent disimpan (",(0,s.jsx)(e.code,{children:"persist"}),"), maka Child otomatis ikut disimpan."]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"MERGE"})}),(0,s.jsxs)(e.td,{children:["Jika Parent diperbarui (",(0,s.jsx)(e.code,{children:"merge"}),"), maka Child otomatis ikut diperbarui."]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"REMOVE"})}),(0,s.jsxs)(e.td,{children:["Jika Parent dihapus, maka Child ",(0,s.jsx)(e.strong,{children:"otomatis ikut dihapus"})," dari database."]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"REFRESH"})}),(0,s.jsx)(e.td,{children:"Jika Parent di-reload dari database, Child juga akan di-reload."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"DETACH"})}),(0,s.jsx)(e.td,{children:"Jika Parent dilepas dari session memori, Child juga ikut dilepas."})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"ALL"})}),(0,s.jsxs)(e.td,{children:["Gabungan dari ",(0,s.jsx)(e.strong,{children:"semua"})," jenis di atas (Persist, Merge, Remove, Refresh, Detach)."]})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"3\ufe0f\u20e3-contoh-implementasi-kode",children:"3\ufe0f\u20e3 Contoh Implementasi Kode"}),"\n",(0,s.jsxs)(e.p,{children:["Mari kita lihat perbedaan antara menggunakan ",(0,s.jsx)(e.code,{children:"ALL"})," dengan menggunakan jenis yang spesifik."]}),"\n",(0,s.jsxs)(e.h3,{id:"a-menggunakan-cascade-all-agresif",children:["A. Menggunakan Cascade ",(0,s.jsx)(e.code,{children:"ALL"})," (Agresif)"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Gunakan ini jika Child tidak bisa hidup tanpa Parent (contoh: Tabel ",(0,s.jsx)(e.code,{children:"Teacher"})," (Parent)  dan ",(0,s.jsx)(e.code,{children:"Classes"})," (Child))."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@OneToOne(mappedBy = "teacher", cascade = CascadeType.ALL)\r\nprivate Classes classes;\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Efek"}),": Jika Anda memanggil ",(0,s.jsx)(e.code,{children:"entityManager.remove(teacher1)"})," untuk menghapus ",(0,s.jsx)(e.code,{children:"Teacher"}),", maka data ",(0,s.jsx)(e.code,{children:"Classes"})," yang terhubung juga ",(0,s.jsx)(e.strong,{children:"akan hilang"})," dari database."]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"b-menggunakan-cascade-terpilih-spesifik",children:"B. Menggunakan Cascade Terpilih (Spesifik)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Gunakan ini jika kita ingin otomatis simpan, update, reload dan detach, tapi ",(0,s.jsx)(e.strong,{children:"tidak ingin"})," otomatis hapus (contoh: Tabel ",(0,s.jsx)(e.code,{children:"Teacher"})," (Child)  dan ",(0,s.jsx)(e.code,{children:"Classes"})," (Parent))."]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@OneToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n@JoinColumn(name = "teacher_id")\r\nprivate Teacher teacher;\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Efek"}),": Menyimpan, update, reload dan detach pada kelas(",(0,s.jsx)(e.code,{children:"Classes"}),") akan otomatis terjadi juga pada guru(",(0,s.jsx)(e.code,{children:"Teacher"}),"). Namun, menghapus kelas(",(0,s.jsx)(e.code,{children:"Classes"}),") ",(0,s.jsx)(e.strong,{children:"tidak akan menghapus"})," gurunya(",(0,s.jsx)(e.code,{children:"Teacher"}),"). Ini lebih aman untuk data referensi seperti Guru."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"4\ufe0f\u20e3-kapan-harus-menggunakan-cascading",children:"4\ufe0f\u20e3 Kapan Harus Menggunakan Cascading?"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Gunakan Cascading"})," jika ada hubungan ketergantungan yang kuat (Parent-Child).","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.em,{children:"Contoh"}),": Menghapus sebuah ",(0,s.jsx)(e.code,{children:"Account"})," maka harus menghapus ",(0,s.jsx)(e.code,{children:"AccountSettings"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Jangan Gunakan Cascading REMOVE"})," jika data Child masih dibutuhkan oleh entitas lain atau merupakan data master.","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Contoh: Jangan hapus Guru (",(0,s.jsx)(e.code,{children:"Teacher"}),") hanya karena kelasnya (",(0,s.jsx)(e.code,{children:"Classes"}),") dibubarkan, karena Guru (",(0,s.jsx)(e.code,{children:"Teacher"}),") tersebut mungkin mengajar di kelas (",(0,s.jsx)(e.code,{children:"Classes"}),") lain."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.h2,{id:"5\ufe0f\u20e3-bonus-perbedaan-penting-cascadetyperemove-vs-orphanremoval--true",children:["5\ufe0f\u20e3 BONUS: Perbedaan Penting: ",(0,s.jsx)(e.code,{children:"CascadeType.REMOVE"})," vs ",(0,s.jsx)(e.code,{children:"orphanRemoval = true"})]}),"\n",(0,s.jsx)(e.p,{children:"Seringkali programmer bingung antara keduanya:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"CascadeType.REMOVE"}),": Jika Parent dihapus, Child dihapus. Tapi jika Anda hanya memutus hubungan (misal: ",(0,s.jsx)(e.code,{children:"class12.setTeacher(null)"}),"), Child ",(0,s.jsx)(e.strong,{children:"tetap ada"}),' di database (menjadi data "yatim"/orphan).']}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"orphanRemoval = true"}),": Jika Anda memutus hubungan (",(0,s.jsx)(e.code,{children:"setTeacher(null)"}),"), Hibernate akan ",(0,s.jsx)(e.strong,{children:"langsung menghapus"})," Child tersebut dari database karena dianggap sudah tidak punya pemilik."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Contoh penggunaan ",(0,s.jsx)(e.code,{children:"orphanRemoval = true"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'// Menggunakan orphanRemoval = true\r\n@OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\r\n@JoinColumn(name = "teacher_id")\r\nprivate Teacher teacher;\n'})})]})}function h(a={}){const{wrapper:e}={...(0,r.R)(),...a.components};return e?(0,s.jsx)(e,{...a,children:(0,s.jsx)(o,{...a})}):o(a)}},28453(a,e,n){n.d(e,{R:()=>d,x:()=>t});var i=n(96540);const s={},r=i.createContext(s);function d(a){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function t(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(s):a.components||s:d(a.components),i.createElement(r.Provider,{value:e},a.children)}}}]);