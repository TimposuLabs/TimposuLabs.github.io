"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[19190],{5676:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"docker-container-advance/membuat-image-dari-container","title":"Membuat Image dari Container","description":"1\ufe0f\u20e3 Konsep Dasar","source":"@site/tutorial/docker/08-docker-container-advance/04-membuat-image-dari-container.md","sourceDirName":"08-docker-container-advance","slug":"/docker-container-advance/membuat-image-dari-container","permalink":"/docker/docker-container-advance/membuat-image-dari-container","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Membuat Image dari Container"},"sidebar":"tutorialSidebar","previous":{"title":"Docker Self-Healing","permalink":"/docker/docker-container-advance/self-healing"},"next":{"title":"Docker Network","permalink":"/docker/docker-network"}}');var r=e(74848),t=e(28453);const s={sidebar_position:4,title:"Membuat Image dari Container"},l=void 0,d={},c=[{value:"1\ufe0f\u20e3 Konsep Dasar",id:"1\ufe0f\u20e3-konsep-dasar",level:2},{value:"2\ufe0f\u20e3 Mengapa Menggunakan Docker Commit?",id:"2\ufe0f\u20e3-mengapa-menggunakan-docker-commit",level:2},{value:"3\ufe0f\u20e3 Cara Melakukan Commit",id:"3\ufe0f\u20e3-cara-melakukan-commit",level:2},{value:"4\ufe0f\u20e3 Menambahkan Metadata saat Commit",id:"4\ufe0f\u20e3-menambahkan-metadata-saat-commit",level:2},{value:"5\ufe0f\u20e3 Bahaya Menggunakan <code>docker commit</code> \u26a0\ufe0f",id:"5\ufe0f\u20e3-bahaya-menggunakan-docker-commit-\ufe0f",level:2},{value:"6\ufe0f\u20e3 Tips",id:"6\ufe0f\u20e3-tips",level:2}];function o(a){const n={code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...a.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"1\ufe0f\u20e3-konsep-dasar",children:"1\ufe0f\u20e3 Konsep Dasar"}),"\n",(0,r.jsxs)(n.p,{children:["Biasanya, kita membuat image menggunakan Dockerfile (pendekatan deklaratif). Namun, Docker juga menyediakan perintah ",(0,r.jsx)(n.code,{children:"docker commit"})," (pendekatan imperatif). Perintah ini mengambil kontainer yang sedang berjalan, lalu membekukan seluruh perubahannya menjadi sebuah Image baru."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Analogi:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dockerfile"}),": Seperti memasak menggunakan resep tertulis dari awal."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docker Commit"}),": Seperti memotret (snapshot) masakan yang sedang diolah, lalu menjadikannya makanan kaleng instan."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"2\ufe0f\u20e3-mengapa-menggunakan-docker-commit",children:"2\ufe0f\u20e3 Mengapa Menggunakan Docker Commit?"}),"\n",(0,r.jsxs)(n.p,{children:["Meskipun Dockerfile adalah best practice, ",(0,r.jsx)(n.code,{children:"docker commit"})," sangat berguna dalam situasi berikut:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debugging"}),': kita masuk ke kontainer, menginstal banyak dependency, mengubah konfigurasi hingga aplikasi jalan, lalu kita ingin menyimpan hasil "perbaikan" tersebut.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Forensik"}),": mengambil status terakhir kontainer yang error untuk dianalisis lebih lanjut di komputer lain."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kustomisasi Cepat"}),": kita menjalankan image dasar (misal Ubuntu), melakukan banyak instalasi manual secara interaktif, dan ingin menyimpannya tanpa menulis Dockerfile."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"3\ufe0f\u20e3-cara-melakukan-commit",children:"3\ufe0f\u20e3 Cara Melakukan Commit"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Langkah 1: Jalankan Kontainer Dasar"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run -it --name kontainer-latihan alpine sh\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Langkah 2: Lakukan Perubahan di Dalamnya"})}),"\n",(0,r.jsx)(n.p,{children:"Misalnya, kita instal sebuah aplikasi dan buat file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'apk add curl\necho "Data Penting" > /data.txt\nexit\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Langkah 3: Ubah Kontainer Menjadi Image"})}),"\n",(0,r.jsx)(n.p,{children:"Gunakan perintah commit untuk menyimpannya:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Sintaks: docker commit [NAMA_KONTAINER] [NAMA_IMAGE_BARU]:[TAG]\ndocker commit kontainer-latihan ucup/alpine-custom:v1.0\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Langkah 4: Verifikasi"})}),"\n",(0,r.jsxs)(n.p,{children:["Cek daftar image, sekarang ",(0,r.jsx)(n.code,{children:"ucup/alpine-custom"})," sudah siap digunakan:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker image ls\n"})}),"\n",(0,r.jsx)(n.h2,{id:"4\ufe0f\u20e3-menambahkan-metadata-saat-commit",children:"4\ufe0f\u20e3 Menambahkan Metadata saat Commit"}),"\n",(0,r.jsx)(n.p,{children:"Kita bisa menambahkan pesan penjelasan (seperti commit pada Git) agar orang lain tahu perubahan apa yang kita lakukan:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker commit --author "Ucup Dev" --message "Sudah instal curl dan file data" kontainer-latihan alpine-v2\n'})}),"\n",(0,r.jsxs)(n.h2,{id:"5\ufe0f\u20e3-bahaya-menggunakan-docker-commit-\ufe0f",children:["5\ufe0f\u20e3 Bahaya Menggunakan ",(0,r.jsx)(n.code,{children:"docker commit"})," \u26a0\ufe0f"]}),"\n",(0,r.jsxs)(n.p,{children:["Kita harus tahu mengapa cara ini ",(0,r.jsx)(n.strong,{children:"tidak disarankan"})," untuk lingkungan production:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Black Box"}),": Orang lain tidak tahu apa saja yang kita lakukan di dalam kontainer tersebut. Tidak ada resep (Dockerfile) yang bisa dibaca."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ukuran Membengkak"}),": Setiap commit menciptakan layer baru yang seringkali tidak efisien dan membuat ukuran image menjadi sangat besar."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tidak Bisa Direplikasi"}),": Jika image tersebut rusak atau hilang, kita tidak bisa membuatnya lagi secara otomatis karena kita tidak punya catatan langkah-langkahnya."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"6\ufe0f\u20e3-tips",children:"6\ufe0f\u20e3 Tips"}),"\n",(0,r.jsxs)(n.p,{children:["Gunakan ",(0,r.jsx)(n.code,{children:"docker commit"})," hanya untuk ",(0,r.jsx)(n.strong,{children:"keadaan darurat"})," atau ",(0,r.jsx)(n.strong,{children:"eksperimen"}),". Jika kita sudah menemukan konfigurasi yang pas melalui ",(0,r.jsx)(n.code,{children:"commit"}),", segera pindahkan langkah-langkah tersebut ke dalam sebuah ",(0,r.jsx)(n.strong,{children:"Dockerfile"})," yang rapi agar aplikasi kita tetap memenuhi standar ",(0,r.jsx)(n.em,{children:"Cloud-Native"})," yang transparan dan dapat diproduksi ulang kapan saja."]})]})}function m(a={}){const{wrapper:n}={...(0,t.R)(),...a.components};return n?(0,r.jsx)(n,{...a,children:(0,r.jsx)(o,{...a})}):o(a)}},28453:(a,n,e)=>{e.d(n,{R:()=>s,x:()=>l});var i=e(96540);const r={},t=i.createContext(r);function s(a){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof a?a(n):{...n,...a}}),[n,a])}function l(a){let n;return n=a.disableParentContext?"function"==typeof a.components?a.components(r):a.components||r:s(a.components),i.createElement(t.Provider,{value:n},a.children)}}}]);