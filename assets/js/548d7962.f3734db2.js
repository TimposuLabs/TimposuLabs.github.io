"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[6972],{90176:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"springboot/springboot-jpa-hibernate/one-to-many-eager","title":"One-to-Many Eager Fetch","description":"Hibernate","source":"@site/tutorial/spring/springboot/springboot-jpa-hibernate/17-one-to-many-eager.md","sourceDirName":"springboot/springboot-jpa-hibernate","slug":"/springboot/springboot-jpa-hibernate/one-to-many-eager","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many-eager","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17,"title":"One-to-Many Eager Fetch"},"sidebar":"tutorialSidebar","previous":{"title":"Fetch Type: Eager vs Lazy","permalink":"/spring/springboot/springboot-jpa-hibernate/eager-lazy"},"next":{"title":"One-to-Many Lazy Fetch","permalink":"/spring/springboot/springboot-jpa-hibernate/one-to-many-lazy"}}');var s=n(74848),i=n(28453);const r={sidebar_position:17,title:"One-to-Many Eager Fetch"},d=void 0,l={},c=[{value:"1\ufe0f\u20e3 Entity Parrent: <code>Classes.java</code>",id:"1\ufe0f\u20e3-entity-parrent-classesjava",level:2},{value:"2\ufe0f\u20e3 Entity Child: <code>Student.java</code>",id:"2\ufe0f\u20e3-entity-child-studentjava",level:2},{value:"3\ufe0f\u20e3 Main Class",id:"3\ufe0f\u20e3-main-class",level:2}];function o(t){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"Hibernate",src:n(8592).A+"",width:"782",height:"310"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Eager Fetching"})," adalah strategi pengambilan data di mana Hibernate secara otomatis mengambil entitas utama beserta seluruh entitas relasinya dalam satu waktu."]}),"\n",(0,s.jsxs)(e.p,{children:["Jika pada ",(0,s.jsx)(e.strong,{children:"Lazy Fetching"})," data child (",(0,s.jsx)(e.code,{children:"Students"}),") baru diambil saat kita memanggil method ",(0,s.jsx)(e.code,{children:"getStudents()"}),", sedangkan pada ",(0,s.jsx)(e.strong,{children:"Eager Fetching"}),", saat kita memanggil ",(0,s.jsx)(e.code,{children:"Classes"}),", semua data ",(0,s.jsx)(e.code,{children:"Students"})," sudah langsung tersedia di memori (RAM)."]}),"\n",(0,s.jsxs)(e.h2,{id:"1\ufe0f\u20e3-entity-parrent-classesjava",children:["1\ufe0f\u20e3 Entity Parrent: ",(0,s.jsx)(e.code,{children:"Classes.java"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Entity\n@Table(name = "classes")\npublic class Classes {\n\n\t@Id\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\n\tprivate Integer id;\n\t\n\t@Column(name = "class_name")\n\tprivate String className;\n\t\n\t@OneToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n\t@JoinColumn(name = "teacher_id")\n\tprivate Teacher teacher;\n\t\n\t@OneToMany(\n\t\t\tmappedBy = "classes",\n\t\t\tfetch = FetchType.EAGER,\n\t\t\tcascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n\tList<Student> students = new ArrayList<>();\n\n\tpublic Classes() {\t\t\n\t}\n\n\tpublic Classes(String className, Teacher teacher) {\n\t\tthis.className = className;\n\t\tthis.teacher = teacher;\n\t}\n\t\n\tpublic Integer getId() {\n\t\treturn id;\n\t}\n\n\tpublic void setId(Integer id) {\n\t\tthis.id = id;\n\t}\n\n\tpublic String getClassName() {\n\t\treturn className;\n\t}\n\n\tpublic void setClassName(String className) {\n\t\tthis.className = className;\n\t}\n\n\tpublic Teacher getTeacher() {\n\t\treturn teacher;\n\t}\n\n\tpublic void setTeacher(Teacher teacher) {\n\t\tthis.teacher = teacher;\n\t}\n\n\tpublic List<Student> getStudents() {\n\t\treturn students;\n\t}\n\n\tpublic void setStudents(List<Student> students) {\n\t\tthis.students = students;\n\t}\n\n\t// menambah method \'add()\' memastikan kedua sisi terhubung secara konsisten dalam memori Java dengan Bi-Direction\n\tpublic void add(Student student) {\n\t\tif (students == null) {\n\t\t\tstudents = new ArrayList<>();\t\t\t\n\t\t}\n\t\tstudents.add(student);\n\t\t\n\t\tif (student != null) {\n\t\t\tstudent.setClasses(this);\n\t\t}\n\t}\n\t\n\t\n\t@Override\n\tpublic String toString() {\n\t\treturn "Class [id=" + id + ", className=" + className + ", teacher=" + teacher + "]";\n\t}\n}\n'})}),"\n",(0,s.jsxs)(e.h2,{id:"2\ufe0f\u20e3-entity-child-studentjava",children:["2\ufe0f\u20e3 Entity Child: ",(0,s.jsx)(e.code,{children:"Student.java"})]}),"\n",(0,s.jsxs)(e.p,{children:["Sisi ",(0,s.jsx)(e.code,{children:"@ManyToOne"})," secara default sudah bersifat ",(0,s.jsx)(e.strong,{children:"EAGER"}),", jadi kita tidak perlu mengubahnya kecuali ingin menjadikannya ",(0,s.jsx)(e.strong,{children:"LAZY"}),"."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Entity\n@Table(name = "student")\npublic class Student {\n\n\t@Id\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\n\tprivate Integer id;\n\t\n\t@Column(name = "first_name")\n\tprivate String firstName;\n\t\n\t@Column(name = "last_name")\n\tprivate String lastName;\n\t\n\t@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n\t@JoinColumn(name = "class_id")\n\tprivate Classes classes;\n\t\n\tpublic Student() {\t\t\n\t}\n\n\tpublic Student(String firstName, String lastName) {\n\t\tthis.firstName = firstName;\n\t\tthis.lastName = lastName;\n\t}\n\n\tpublic Integer getId() {\n\t\treturn id;\n\t}\n\n\tpublic void setId(Integer id) {\n\t\tthis.id = id;\n\t}\n\n\tpublic String getFirstName() {\n\t\treturn firstName;\n\t}\n\n\tpublic void setFirstName(String firstName) {\n\t\tthis.firstName = firstName;\n\t}\n\n\tpublic String getLastName() {\n\t\treturn lastName;\n\t}\n\n\tpublic void setLastName(String lastName) {\n\t\tthis.lastName = lastName;\n\t}\n\t\n\tpublic Classes getClasses() {\n\t\treturn classes;\n\t}\n\n\tpublic void setClasses(Classes classes) {\n\t\tthis.classes = classes;\n\t}\n\n\t@Override\n\tpublic String toString() {\n\t\treturn "Student [id=" + id + ", firstName=" + firstName + ", lastName=" + lastName + "]";\n\t}\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"3\ufe0f\u20e3-main-class",children:"3\ufe0f\u20e3 Main Class"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Pada main class application kita akan menampilkan data ",(0,s.jsx)(e.code,{children:"Classes"})," dengan berisi data ",(0,s.jsx)(e.code,{children:"Student"}),". Dalam contoh di bawah ini kita akan menampilkan data ",(0,s.jsx)(e.code,{children:"Classes"})," dengan id 3:"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@SpringBootApplication\npublic class Application {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(Application.class, args);\n\t}\n\n\t// Bean ini akan dieksekusi di command line\n\t@Bean\n\tpublic CommandLineRunner commandLineRunner(SchoolDAO dao) {\n\t\treturn runner -> {\n\t\t\t\n\t\t\tfindClassWithStudent(dao);\t\t\t\n\n\t\t};\n\t}\n\n\tprivate void findClassWithStudent(SchoolDAO dao) {\n\t\tint id = 3;\n\t\tClasses classes = dao.findClassById(id);\n\t\t\n\t\tSystem.out.println("Kelas: " + classes);\n\t\tSystem.out.println("Daftar siswa: " + classes.getStudents());\n\t}\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Output pada Hibernate SQL:"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Asumsi kita mempunyai data dalam database:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"mysql> select * from classes;\n+----+------------+------------+\n| id | class_name | teacher_id |\n+----+------------+------------+\n|  3 | Kelas 10   |          2 |\n+----+------------+------------+\n\nmysql> select * from student;\n+----+------------+-----------+----------+\n| id | first_name | last_name | class_id |\n+----+------------+-----------+----------+\n|  7 | Uzumaki    | Naruto    |        3 |\n|  8 | Uciha      | Sazuke    |        3 |\n|  9 | Haruno     | Sakura    |        3 |\n+----+------------+-----------+----------+\n"})}),"\n",(0,s.jsx)(e.p,{children:"Output JPQL:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"Hibernate: select c1_0.id,c1_0.class_name,t1_0.id,t1_0.first_name,t1_0.last_name,s1_0.class_id,s1_0.id,s1_0.first_name,s1_0.last_name from classes c1_0 left join teacher t1_0 on t1_0.id=c1_0.teacher_id left join student s1_0 on c1_0.id=s1_0.class_id where c1_0.id=?\nKelas: Class [id=3, className=Kelas 10, teacher=Guru [id=2, firstName=Hatake, lastName=Kakashi]]\nDaftar siswa: [Student [id=7, firstName=Uzumaki, lastName=Naruto], Student [id=8, firstName=Uciha, lastName=Sazuke], Student [id=9, firstName=Haruno, lastName=Sakura]]\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Source Code"}),": ",(0,s.jsx)(e.a,{href:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/05-hibernate-one-to-many-eager",children:"https://github.com/TimposuLabs/belajar-springboot-jpa-hibernate-advance/tree/main/05-hibernate-one-to-many-eager"})]})})]})}function u(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(o,{...t})}):o(t)}},8592:(t,e,n)=>{n.d(e,{A:()=>a});const a=n.p+"assets/images/one-to-many2-00fb2d0cbe6ed69f3fb5b85aae37a8e9.png"},28453:(t,e,n)=>{n.d(e,{R:()=>r,x:()=>d});var a=n(96540);const s={},i=a.createContext(s);function r(t){const e=a.useContext(i);return a.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function d(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:r(t.components),a.createElement(i.Provider,{value:e},t.children)}}}]);