"use strict";(self.webpackChunktimposu=self.webpackChunktimposu||[]).push([[2850],{77349:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"express/unit-test","title":"Unit Test","description":"Salah satu yang sulit ketika membuat aplikasi web yang harus berjalan yaitu melakukan automation test. Jika melakukan manual test, terlihat mudah tinggal kita buka melalui web browser. Namun dalam pekerjaan sehari-hari, lambat laun, hal ini akan menyulitkan kita ketika harus melakukan manual test jika terdapat perubahan di aplikasi kita. Oleh karena itu, sangat direkomendasikan menggunakan unit test, walaupun aplikasinya dalam bentuk web.","source":"@site/tutorial/nodejs/express/05-unit-test.md","sourceDirName":"express","slug":"/express/unit-test","permalink":"/nodejs/express/unit-test","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Unit Test"},"sidebar":"tutorialSidebar","previous":{"title":"Basic Routing","permalink":"/nodejs/express/routing"},"next":{"title":"Request","permalink":"/nodejs/express/request/"}}');var s=t(74848),r=t(28453);const i={sidebar_position:5,title:"Unit Test"},l=void 0,u={},d=[{value:"Supertest",id:"supertest",level:2},{value:"1. \u2699\ufe0f Install Supertest dan Jest",id:"1-\ufe0f-install-supertest-dan-jest",level:3},{value:"2. \ud83d\udcbb Buat file test",id:"2--buat-file-test",level:3},{value:"3. \ud83d\ude80 Jalankan Test",id:"3--jalankan-test",level:3}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Salah satu yang sulit ketika membuat aplikasi web yang harus berjalan yaitu melakukan automation test. Jika melakukan manual test, terlihat mudah tinggal kita buka melalui web browser. Namun dalam pekerjaan sehari-hari, lambat laun, hal ini akan menyulitkan kita ketika harus melakukan manual test jika terdapat perubahan di aplikasi kita. Oleh karena itu, sangat direkomendasikan menggunakan unit test, walaupun aplikasinya dalam bentuk web."}),"\n",(0,s.jsx)(n.h2,{id:"supertest",children:"Supertest"}),"\n",(0,s.jsx)(n.p,{children:"Supertest adalah salah satu library yang bisa digunakan untuk membantu melakukan pengetesan web Express.js. Dengan Supertest, kita bisa lebih mudah membuat unit testnya, dibading melakukan secara manual."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://www.npmjs.com/package/supertest",children:"https://www.npmjs.com/package/supertest"})})}),"\n",(0,s.jsx)(n.h3,{id:"1-\ufe0f-install-supertest-dan-jest",children:"1. \u2699\ufe0f Install Supertest dan Jest"}),"\n",(0,s.jsxs)(n.p,{children:["Kita memerlukan ",(0,s.jsx)(n.code,{children:"Mocha"})," atau ",(0,s.jsx)(n.code,{children:"Jest"})," sebagai test framework utama, dan ",(0,s.jsx)(n.code,{children:"SuperTest"})," untuk melakukan permintaan HTTP. Kita akan menggunakan ",(0,s.jsx)(n.code,{children:"Jest"})," dalam contoh ini karena popularitasnya."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm i supertest --save-dev\r\nnpm i jest --save-dev\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Pastikan pada file ",(0,s.jsx)(n.code,{children:"package.json"})," bagian ",(0,s.jsx)(n.code,{children:"devDependencies"})," sudah terdapat dependencinya:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:' "devDependencies": {\r\n    "jest": "^30.2.0",\r\n    "supertest": "^7.1.4"\r\n  }\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Dan update ",(0,s.jsx)(n.code,{children:"type"})," dan ",(0,s.jsx)(n.code,{children:"script"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"type": "commonjs",\r\n  "scripts": {\r\n    "test": "jest"\r\n  },\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Sehingga ",(0,s.jsx)(n.code,{children:"package.json"})," menjadi seperti ini:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "name": "belajar-express",\r\n  "version": "1.0.0",\r\n  "description": "Belajar Express JS",\r\n  "main": "index.js",\r\n  "type": "commonjs",\r\n  "scripts": {\r\n    "test": "jest"\r\n  },\r\n  "author": "Ucup Topekox",\r\n  "license": "ISC",\r\n  "dependencies": {\r\n    "express": "^5.1.0"\r\n  },\r\n  "devDependencies": {\r\n    "jest": "^30.2.0",\r\n    "supertest": "^7.1.4"\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2--buat-file-test",children:"2. \ud83d\udcbb Buat file test"}),"\n",(0,s.jsxs)(n.p,{children:["Buat file test contoh direktori ",(0,s.jsx)(n.code,{children:"test"}),", semua file test akan disimpan dalam direktori ini:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mkdir test\r\ntouch test/request.test.js\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Isi dalam file ",(0,s.jsx)(n.code,{children:"request.test.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const request = require('supertest');\r\nconst express = require('express');\r\n\r\nconst app = express();\r\n\r\napp.get('/hello', (req, res) => {\r\n    res.send('Hello World!');\r\n});\r\n\r\n// melakukan test untuk endpoint /hello\r\ntest('Test Express /hello endpoint', async () => {\r\n    const response = await request(app).get('/hello');\r\n    expect(response.status).toBe(200);\r\n    expect(response.text).toBe('Hello World!');\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3--jalankan-test",children:"3. \ud83d\ude80 Jalankan Test"}),"\n",(0,s.jsx)(n.p,{children:"Untuk melakukan testing semua file test menggunakan perintah:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm test\n"})}),"\n",(0,s.jsx)(n.p,{children:"Output jika sukses:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm test\r\n\r\n> belajar-express@1.0.0 test\r\n> jest\r\n\r\n PASS  test/request.test.js\r\n  \u221a Test Express /hello endpoint (46 ms)\r\n                                                                                                                                                                                                \r\nTest Suites: 1 passed, 1 total                                                                                                                                                                  \r\nTests:       1 passed, 1 total                                                                                                                                                                  \r\nSnapshots:   0 total\r\nTime:        1.036 s, estimated 2 s\r\nRan all test suites.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Untuk testing file tertentu saja:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"npm test test/request.test.js\n"})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(96540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);