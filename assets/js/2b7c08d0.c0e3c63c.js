"use strict";(globalThis.webpackChunktimposu=globalThis.webpackChunktimposu||[]).push([[249],{6032(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"express/cookie","title":"Cookie","description":"Dalam protokol HTTP, salah satu elemen yang umum dipakai untuk pertukaran informasi antara Server dan Client adalah Cookie. Contohnya sejumlah pengguna memanfaatkan Cookie sebagai Session. Namun, Express.js secara default tidak menyediakan dukungan untuk Cookie, tetapi kita bisa memanfaatkan Middleware dari pihak ketiga untuk mengaktifkan penggunaan Cookie ini.","source":"@site/tutorial/nodejs/express/15-cookie.md","sourceDirName":"express","slug":"/express/cookie","permalink":"/nodejs/express/cookie","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Cookie"},"sidebar":"tutorialSidebar","previous":{"title":"Request Body","permalink":"/nodejs/express/request-body"},"next":{"title":"Signed Cookie","permalink":"/nodejs/express/cookie-signed"}}');var i=a(74848),o=a(28453);const r={sidebar_position:15,title:"Cookie"},t=void 0,c={},l=[{value:"\ud83c\udf6a Cookie Parser",id:"-cookie-parser",level:2},{value:"\ud83d\udcd6 Membaca Cookie",id:"-membaca-cookie",level:2},{value:"\u270d\ufe0f Menulis Cookie",id:"\ufe0f-menulis-cookie",level:2},{value:"\ud83d\udd25 Full Code dengan Unit",id:"-full-code-dengan-unit",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Dalam protokol HTTP, salah satu elemen yang umum dipakai untuk pertukaran informasi antara Server dan Client adalah Cookie. Contohnya sejumlah pengguna memanfaatkan Cookie sebagai Session. Namun, Express.js secara default tidak menyediakan dukungan untuk Cookie, tetapi kita bisa memanfaatkan Middleware dari pihak ketiga untuk mengaktifkan penggunaan Cookie ini."}),"\n",(0,i.jsx)(n.h2,{id:"-cookie-parser",children:"\ud83c\udf6a Cookie Parser"}),"\n",(0,i.jsx)(n.p,{children:"Cookie Parser adalah salah satu Third-Party Middleware yang bisa kita gunakan untuk mendukung fitur Cookie, dimana dengan Cookie Parser, kita secara otomatis menyimpan data ke Cookie, atau mengambil data ke Cookie."}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/cookie-parser",children:"https://www.npmjs.com/package/cookie-parser"})}),"\n"]})}),"\n",(0,i.jsx)(n.p,{children:"Install dependency Cookie Parser:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npm i cookie-parser\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-membaca-cookie",children:"\ud83d\udcd6 Membaca Cookie"}),"\n",(0,i.jsxs)(n.p,{children:["Setelah mengistall Cookie Parser Middleware, kita bisa secara otomatis membaca Cookie yang dikirim dari Client melalui ",(0,i.jsx)(n.code,{children:"req.cookies"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://expressjs.com/en/5x/api.html#req.cookies",children:"https://expressjs.com/en/5x/api.html#req.cookies"})}),"\n"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const express = require('express');\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\napp.use(express.json());\napp.use(cookieParser()); // menambahkan middleware cookie-parser\n\n// Endpoint membaca cookie yang dikirimkan oleh client\napp.get('/', (req, res) => {\n    const username = req.cookies[\"username\"];\n    res.send(`Hello ${username}!`);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-menulis-cookie",children:"\u270d\ufe0f Menulis Cookie"}),"\n",(0,i.jsxs)(n.p,{children:["Untuk menulis Cookie, kita bisa tambahkan di ",(0,i.jsx)(n.code,{children:"response"})," untuk dikirim ke client, dengan method ",(0,i.jsx)(n.code,{children:"res.cookie(key, value, setting)"}),". Dan untuk menghapus/clear Cookie, kita bisa gunakan ",(0,i.jsx)(n.code,{children:"res.clearCookie(key, setting)"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://expressjs.com/en/5x/api.html#res.cookie",children:"https://expressjs.com/en/5x/api.html#res.cookie"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://expressjs.com/en/5x/api.html#res.clearCookie",children:"https://expressjs.com/en/5x/api.html#res.clearCookie"})}),"\n"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const express = require('express');\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\napp.use(express.json());\napp.use(cookieParser()); // menambahkan middleware cookie-parser\n\n// Endpoint mengirim cookie ke client\napp.post('/login', (req, res) => {\n    const username = req.body.username;\n    res.cookie(\"Username\", username, {path: '/'}); // set path cookie menjadi / agar bisa diakses di semua endpoint, jika tidak diset maka defaultnya adalah path dari endpoint itu adalah /login\n    res.send(`Hello ${username}, kamu sudah login.`);\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-full-code-dengan-unit",children:"\ud83d\udd25 Full Code dengan Unit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"const request = require('supertest');\nconst express = require('express');\nconst cookieParser = require('cookie-parser');\n\nconst app = express();\napp.use(express.json());\napp.use(cookieParser()); // menambahkan middleware cookie-parser\n\n// Endpoint membaca cookie yang dikirimkan oleh client\napp.get('/', (req, res) => {\n    const username = req.cookies[\"username\"];\n    res.send(`Hello ${username}!`);\n});\n\n// Endpoint mengirim cookie ke client\napp.post('/login', (req, res) => {\n    const username = req.body.username;\n    res.cookie(\"Username\", username, {path: '/'}); // set path cookie menjadi / agar bisa diakses di semua endpoint, jika tidak diset maka defaultnya adalah path dari endpoint itu adalah /login\n    res.send(`Hello ${username}, kamu sudah login.`);\n});\n\n// Unit Test\ntest('Test Membaca Cookie / endpoint', async () => {\n    const response = await request(app).get('/')\n    .set('Cookie', ['username=Ucup']);\n    \n    expect(response.status).toBe(200);\n    expect(response.text).toBe('Hello Ucup!');\n});\n\ntest('Test Membuat Cookie /login endpoint', async () => {\n    const response = await request(app).post('/login')\n    .send({username: 'Ucup'});\n\n    expect(response.status).toBe(200);\n    expect(response.get('set-cookie').toString()).toBe('Username=Ucup; Path=/'); // memastikan cookie terkirim dengan benar\n    expect(response.text).toBe('Hello Ucup, kamu sudah login.');\n});\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},28453(e,n,a){a.d(n,{R:()=>r,x:()=>t});var s=a(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);